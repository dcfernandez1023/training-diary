(this["webpackJsonptraining-diary-frontend"]=this["webpackJsonptraining-diary-frontend"]||[]).push([[0],{362:function(e,t,a){e.exports=a(741)},367:function(e,t,a){},464:function(e,t,a){},465:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},645:function(e,t,a){},646:function(e,t,a){},741:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(39),o=a.n(r),s=(a(367),a(17)),i=a.n(s),d=a(27),c=a(29),u=a(30),m=a(19),p=a(32),g=a(31),h=(a(187),a(45)),E=a.n(h),y=a(12),f=(a(117),a(49)),v=a.n(f),b=a(50),D=a(41),w=a(10),C=a(7),S=a(89),T=a(44),k=a(318),N=a(9),M=a(136),O=a(58),A=a.n(O),F=a(128),x=a(129),I=(a(248),a(105)),L=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={validated:!1,onLogin:!0,loginUsername:"",loginPassword:"",registerUsername:"",registerPassword:"",email:"",birthday:null},e.handleLoginResponse=function(t){try{200===Number(t.status)&&(e.props.grantAccess(e.state.loginUsername,t.headers.token),localStorage.setItem("token",t.headers.token),localStorage.setItem("username",e.state.loginUsername))}catch(a){e.props.toggleAuthLoader()}},e.login=function(){0!==e.state.loginUsername.toString().trim().length&&0!==e.state.loginPassword.toString().length&&(e.props.toggleAuthLoader(),E.a.post("/login",{username:e.state.loginUsername.toString().trim(),password:e.state.loginPassword}).catch((function(e){401===e.response.status&&alert("Invalid credentials")})).then((function(t){return e.handleLoginResponse(t)})))},e.handleRegistrationResponse=function(t){try{200===Number(t.status)&&(e.props.grantAccess(e.state.registerUsername,t.headers.token),localStorage.setItem("token",t.headers.token),localStorage.setItem("username",e.state.loginUsername))}catch(a){e.props.toggleAuthLoader()}},e.register=function(){0!==e.state.registerUsername.toString().trim().length&&0!=e.state.registerPassword.toString().trim().length&&0!==e.state.email.toString().trim().length&&null!==e.state.birthday&&(e.props.toggleAuthLoader(),E.a.post("/register",{username:e.state.registerUsername.toString().trim(),password:e.state.registerPassword,email:e.state.email.toString().trim(),birthday:e.state.birthday}).catch((function(e){409===e.response.status&&alert("Username or email already exists")})).then((function(t){return e.handleRegistrationResponse(t)})))},e.handleSubmit=function(t){!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.setState({validated:!0}),t.preventDefault(),e.state.onLogin?e.login():e.register()},e.onChangeLogin=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(b.a)({},a,n))},e.onSelectBirthday=function(t){e.setState({birthday:t})},e.toggleTab=function(t){"login"===t&&e.state.onLogin||("register"!==t||e.state.onLogin)&&e.setState({onLogin:!e.state.onLogin,validated:!1,loginUsername:"",loginPassword:"",registerUsername:"",registerPassword:"",email:"",birthday:null})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=l.a.createElement(N.a.Control,{required:!0,type:"input",value:this.state.birthday,autoComplete:"off"});return l.a.createElement(k.a,null,l.a.createElement(D.a,{fluid:!0},l.a.createElement(w.a,null,l.a.createElement(C.a,{lg:6},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("h1",null," Training Diary "),l.a.createElement("p",null,"A simple application to track and analyze your workout data."))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(M.a,null,l.a.createElement(M.a.Image,{src:"https://cdn.emojidex.com/emoji/seal/weight_lifter.png",width:200,height:300}))),l.a.createElement(C.a,null,l.a.createElement(M.a,null,l.a.createElement(M.a.Image,{src:"https://cdn.emojidex.com/emoji/seal/chart_with_upwards_trend.png",width:200,height:300}))))),l.a.createElement(C.a,{lg:6},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(S.a,{defaultActiveKey:"login",onSelect:this.toggleTab.bind(this)},l.a.createElement(T.a,{eventKey:"login",title:"Login"},l.a.createElement("br",null),this.state.onLogin?l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Username "),l.a.createElement(N.a.Control,{required:!0,type:"input",placeholder:"Username",name:"loginUsername",value:this.state.loginUsername,onChange:function(t){e.onChangeLogin(t)},autoComplete:"off"}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Password "),l.a.createElement(N.a.Control,{required:!0,type:"password",placeholder:"Password",name:"loginPassword",value:this.state.loginPassword,onChange:function(t){e.onChangeLogin(t)}}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(y.a,{type:"submit",disabled:this.props.disabled}," Login ")),l.a.createElement(C.a,null,this.props.authLoading?l.a.createElement("div",{style:{float:"left",marginTop:"5%"}},l.a.createElement(v.a,{type:"TailSpin",color:"#00BFFF",height:80,width:80})):l.a.createElement("div",null," "))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(I.b,{to:"/reset"}," Forgot Password? ")))))):l.a.createElement("div",null," ")),l.a.createElement(T.a,{eventKey:"register",title:"Register"},l.a.createElement("br",null),this.state.onLogin?l.a.createElement("div",null," "):l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit},l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Username "),l.a.createElement(N.a.Control,{required:!0,type:"input",placeholder:"Username",name:"registerUsername",value:this.state.registerUsername,onChange:function(t){e.onChangeLogin(t)},autoComplete:"off"})),l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Password "),l.a.createElement(N.a.Control,{required:!0,type:"password",placeholder:"Password",name:"registerPassword",value:this.state.registerPassword,onChange:function(t){e.onChangeLogin(t)}}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Email "),l.a.createElement(N.a.Control,{required:!0,type:"input",placeholder:"Email",name:"email",value:this.state.email,onChange:function(t){e.onChangeLogin(t)},autoComplete:"off"})),l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Birthday "),l.a.createElement(A.a,{required:!0,selected:this.state.birthday,onChange:this.onSelectBirthday,minDate:Object(x.default)(new Date,120),maxDate:Object(F.default)(new Date,0),showYearDropdown:!0,scrollableYearDropdown:!0,showMonthDropdown:!0,dropdownMode:"select",placeholderText:"Birthday",customInput:t}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(y.a,{type:"submit",disabled:this.props.disabled}," Register ")),l.a.createElement(C.a,null,this.props.authLoading?l.a.createElement("div",{style:{float:"left",marginTop:"5%"}},l.a.createElement(v.a,{type:"TailSpin",color:"#00BFFF",height:80,width:80})):l.a.createElement("div",null," "))))))))))))))}}]),a}(n.Component),j=(a(464),a(756)),P=(a(465),a(20)),B=(a(466),a(51)),z=a(42),U=a(23),G=a.n(U),R=a(69),J=a(18),q=a(8),K=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:null,newData:{},entryType:null,showAlert:!1,alertMessage:"",nameMenuShow:!1},e.componentDidMount=function(){e.setState({data:e.props.data})},e.componentDidUpdate=function(){e.state.data!==e.props.data&&e.setState({data:e.props.data})},e.onSelectName=function(t){var a=JSON.parse(JSON.stringify(e.state.newData));a.Name=t,e.setState({newData:a})},e.showNameList=function(t){0===t.length?e.setState({nameMenuShow:!1}):e.setState({nameMenuShow:!0})},e.onClickRootClose=function(){e.state.nameMenuShow?e.setState({nameMenuShow:!1}):e.setState({nameMenuShow:!0})},e.showAlert=function(t){e.setState({showAlert:!0,alertMessage:t})},e.hideAlert=function(){e.setState({showAlert:!1,alertMessage:""})},e.validateFields=function(){if(null===e.state.entryType||0===Object.keys(e.state.newData).length)return e.showAlert("Cannot save data, you're missing some required fields!"),!1;for(var t in e.state.newData)if("Notes"!==t&&"displayOrder"!==t){if(0===e.state.newData[t].toString().trim().length)return e.showAlert("Cannot save data, you're missing some required fields!"),!1;if("number"===e.state.entryType[t]&&isNaN(Number(e.state.newData[t])))return e.showAlert("'"+t+"' must be a number!"),!1;if("string"===e.state.entryType[t]&&!isNaN(Number(e.state.newData[t])))return e.showAlert("'"+t+"' cannot be a number!"),!1;e.state.newData[t]=e.state.newData[t].toString().trim()}return e.hideAlert(),!0},e.hasTypeBeenEntered=function(){for(var t=0;t<e.state.data.userData.length;t++){var a=e.state.data.userData[t];if(new Date(a.Date).getTime()===e.props.selectedDate.getTime()&&a.Category===e.state.newData.Category&&a.Type===e.state.newData.Type)return t}return-1},e.calculateNewAmount=function(t){if(-1!==t){var a=null;for(var n in e.state.entryType)"number"===e.state.entryType[n]&&(a=n);if(null!==a)if("add"===e.state.entryType.calculationType){var l=Number(e.state.data.userData[t][a])+Number(e.state.newData[a]);Math.floor(l)!==l&&(l=l.toFixed(2)),e.state.data.userData[t][a]=l.toString()}else if("subtract"===e.state.entryType.calculationType){l=Number(e.state.data.userData[t][a])-Number(e.state.newData[a]);Math.floor(l)!==l&&(l=l.toFixed(2)),e.state.data.userData[t][a]=l.toString()}else if("multiply"===e.state.entryType.calculationType){l=Number(e.state.data.userData[t][a])*Number(e.state.newData[a]);Math.floor(l)!==l&&(l=l.toFixed(2)),e.state.data.userData[t][a]=l.toString()}else if("divide"===e.state.entryType.calculationType){l=Number(e.state.data.userData[t][a])/Number(e.state.newData[a]);Math.floor(l)!==l&&(l=l.toFixed(2)),e.state.data.userData[t][a]=l.toString()}else if("average"===e.state.entryType.calculationType){l=Number(e.state.data.userData[t][a])+Number(e.state.newData[a]);l/=2,Math.floor(l)!==l&&(l=l.toFixed(2)),e.state.data.userData[t][a]=l.toString()}else"none"===e.state.entryType.calculationType&&e.state.data.userData.push(e.state.newData);else alert("Error: Could not calculate new amount -- null")}else e.state.data.userData.push(e.state.newData)},e.saveNewData=Object(d.a)(i.a.mark((function t(){var a,n,l,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validateFields()){t.next=2;break}return t.abrupt("return");case 2:if(a=!1,void 0===e.state.newData.Name||null===e.state.newData.Name){t.next=14;break}n=e.state.newData.Name,l=0;case 6:if(!(l<e.state.data.entryNames.length)){t.next=13;break}if(n!==e.state.data.entryNames[l].Name){t.next=10;break}return a=!0,t.abrupt("break",13);case 10:l++,t.next=6;break;case 13:a||((r={}).Name=n,r.Category=e.state.newData.Category,r.Type=e.state.newData.Type,e.state.data.entryNames.push(r));case 14:return e.state.data.userData.push(e.state.newData),t.next=17,e.props.saveData(e.state.data,"save","AddModal");case 17:e.props.reloadCalendar(),e.closeModal();case 19:case"end":return t.stop()}}),t)}))),e.closeModal=function(){e.props.toggleAddModal(),e.setState({newData:{},showAlert:!1,alertMessage:""})},e.resetModal=function(){e.setState({newData:{}})},e.onChangeNewData=function(t){var a,n,l=null,r=t.target.name,o=t.target.value;if(null!==(a=e.state.newData)&&void 0!==a||(a={}),"Category"===r)n={},Object(b.a)(n,r,o),Object(b.a)(n,"Type",""),a=n;else if("Type"===r){a=Object(b.a)({Category:e.state.newData.Category},r,o);for(var s=0;s<e.props.data.metaData.entryTypes.length;s++){var i=e.props.data.metaData.entryTypes[s];if(i.Category===e.state.newData.Category&&i.Type===o){for(var d=0;d<i.displayOrder.length;d++){var c=i.displayOrder[d];"Category"!==c&&"Type"!==c&&(a[c]="")}a.displayOrder=i.displayOrder,a.Date=e.props.selectedDate.toString(),a.calculationType=i.calculationType,l=i;break}}}else"Name"===r?(e.showNameList(o),a[r]=o,l=e.state.entryType):(a[r]=o,l=e.state.entryType);e.setState({newData:a,entryType:l})},e.createForm=function(){if(null===e.props.data)return null;var t,a=Object.keys(e.state.newData);return 0===a.length?t=l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},"Category"),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(B.a,{as:"select",name:"Category",onChange:function(t){e.onChangeNewData(t)}},l.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0}," Select "),e.props.data.metaData.categories.map((function(e){return l.a.createElement("option",{key:G()(),value:e},e)}))))):(t=a.map((function(t){if("Category"===t)return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(B.a,{as:"select",value:e.state.newData[t],name:t,onChange:function(t){e.onChangeNewData(t)}},l.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0}," Select "),e.props.data.metaData.categories.map((function(e){return l.a.createElement("option",{value:e,key:G()()},e)})))));if("Type"===t)return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(B.a,{as:"select",value:e.state.newData[t],name:t,onChange:function(t){e.onChangeNewData(t)}},l.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0}," Select "),e.props.data.metaData.entryTypes.map((function(t){if(t.Category===e.state.newData.Category)return l.a.createElement("option",{value:t.Type,key:G()()},t.Type)})))));if("displayOrder"!==t&&"Date"!==t&&"calculationType"!==t){if("Name"===t){for(var a=[],n=0;n<e.state.data.entryNames.length;n++){var r=e.state.data.entryNames[n];e.state.newData.Category===r.Category&&e.state.newData.Type===r.Type&&a.push(r.Name)}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(z.a,null,l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.newData[t],onChange:function(t){e.onChangeNewData(t)}}),l.a.createElement(J.a,{show:e.state.nameMenuShow,as:z.a.Prepend,onToggle:e.onClickRootClose.bind(Object(m.a)(e))},l.a.createElement(J.a.Toggle,{variant:"outline-secondary",eventkey:"00"}," "),l.a.createElement(J.a.Menu,{rootCloseEvent:"click"},a.map((function(t){return l.a.createElement(J.a.Item,{onSelect:e.onSelectName.bind(Object(m.a)(e),t)},t)})))))))}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(B.a,{as:"input",value:e.state.newData[t],name:t,onChange:function(t){e.onChangeNewData(t)}})))}})),l.a.createElement("div",null," ",t," "))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.createForm(),t=this.props.toDateString(this.props.selectedDate);return l.a.createElement(P.a,{show:this.props.addModalShow,centered:!0,scrollable:!0,size:"lg",onExited:this.resetModal,onHide:this.closeModal,backdrop:"static"},l.a.createElement(P.a.Header,null,l.a.createElement("h5",{className:"modal-header-tag"}," Add Training Data "),l.a.createElement("h5",{className:"modal-header-tag"}," ",t," ")),l.a.createElement(P.a.Body,null,e),this.state.showAlert?l.a.createElement(P.a.Footer,null,l.a.createElement("div",{className:"alert-container"},l.a.createElement(R.a,{className:"error-alert",variant:"danger",onClose:this.hideAlert.bind(this),dismissible:!0},l.a.createElement("p",null," ",this.state.alertMessage," "))),l.a.createElement("div",{className:"loader-container"},l.a.createElement(v.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,visible:this.props.isSaving})),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:this.closeModal}," Close "),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:this.saveNewData}," Save ")):l.a.createElement(P.a.Footer,null,l.a.createElement("div",{className:"loader-container"},l.a.createElement(v.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,visible:this.props.isSaving})),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:this.closeModal}," Close "),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:this.saveNewData}," Save ")))}}]),a}(n.Component),V=(a(467),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={dataToEdit:null,hasLoaded:!1,entryType:null,showAlert:!1,alertMessage:"",nameMenuShow:!1},e.componentDidMount=function(){e.setState({dataToEdit:e.props.dataToEdit})},e.componentDidUpdate=function(){if(null===e.state.dataToEdit&&null!==e.props.dataToEdit){e.setState({dataToEdit:e.props.dataToEdit});for(var t=0;t<e.props.data.metaData.entryTypes.length;t++)e.props.dataToEdit.Category===e.props.data.metaData.entryTypes[t].Category&&e.props.dataToEdit.Type===e.props.data.metaData.entryTypes[t].Type&&e.setState({entryType:e.props.data.metaData.entryTypes[t]})}},e.onSelectName=function(t){var a=JSON.parse(JSON.stringify(e.state.dataToEdit));a.Name=t,e.setState({dataToEdit:a})},e.showNameList=function(t){0===t.length?e.setState({nameMenuShow:!1}):e.setState({nameMenuShow:!0})},e.onClickRootClose=function(){e.state.nameMenuShow?e.setState({nameMenuShow:!1}):e.setState({nameMenuShow:!0})},e.showAlert=function(t){e.setState({showAlert:!0,alertMessage:t})},e.hideAlert=function(){e.setState({showAlert:!1})},e.closeModal=function(){e.props.toggleEditModal(null),e.setState({dataToEdit:null,hasLoaded:!1}),e.setState({newData:{},showAlert:!1,alertMessage:""})},e.resetModal=function(){e.setState({dataToEdit:null,hasLoaded:!1}),e.setState({newData:{},showAlert:!1,alertMessage:""})},e.validateFields=function(){if(null===e.state.entryType)return e.showAlert("Cannot save data, you're missing some required fields!"),!1;for(var t in e.state.dataToEdit)if("Notes"!==t&&"displayOrder"!==t){if(0===e.state.dataToEdit[t].toString().trim().length)return e.showAlert("Cannot save data, you're missing some required fields!"),!1;if("number"===e.state.entryType[t]&&isNaN(Number(e.state.dataToEdit[t])))return e.showAlert("'"+t+"' must be a number!"),!1;if("string"===e.state.entryType[t]&&!isNaN(Number(e.state.dataToEdit[t])))return e.showAlert("'"+t+"' cannot be a number!"),!1;e.state.dataToEdit[t]=e.state.dataToEdit[t].toString().trim()}return e.hideAlert(),!0},e.onChangeEdit=function(t){var a=JSON.parse(JSON.stringify(e.state.dataToEdit)),n=t.target.name,l=t.target.value;"Name"===n?(e.showNameList(l),a[n]=l):a[n]=l,e.setState({dataToEdit:a})},e.onSelectName=function(t){var a=JSON.parse(JSON.stringify(e.state.dataToEdit));a.Name=t,e.setState({dataToEdit:a})},e.saveEdit=Object(d.a)(i.a.mark((function t(){var a,n,l,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=JSON.parse(JSON.stringify(e.props.data)),n=!1,!e.validateFields()){t.next=20;break}if(void 0===e.state.dataToEdit.Name||null===e.state.dataToEdit.Name){t.next=13;break}l=0;case 5:if(!(l<a.entryNames.length)){t.next=12;break}if(e.state.dataToEdit.Name!==a.entryNames[l].Name){t.next=9;break}return n=!0,t.abrupt("break",12);case 9:l++,t.next=5;break;case 12:n||((r={}).Name=e.state.dataToEdit.Name,r.Category=e.state.dataToEdit.Category,r.Type=e.state.dataToEdit.Type,a.entryNames.push(r));case 13:return a.userData[e.props.editIndex]=e.state.dataToEdit,t.next=16,e.props.saveData(a,"save","EditModal");case 16:e.props.reloadCalendar(),e.closeModal(),t.next=21;break;case 20:return t.abrupt("return");case 21:case"end":return t.stop()}}),t)}))),e.createEditFields=function(){if(null===e.state.dataToEdit||void 0==e.state.dataToEdit)return null;var t=e.state.dataToEdit.displayOrder.map((function(t){if("Category"===t||"Type"===t)return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(B.a,{as:"input",name:t,value:e.state.dataToEdit[t],disabled:!0})));if("Name"===t){for(var a=[],n=0;n<e.props.data.entryNames.length;n++){var r=e.props.data.entryNames[n];e.state.dataToEdit.Category===r.Category&&e.state.dataToEdit.Type===r.Type&&a.push(r.Name)}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(z.a,null,l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.dataToEdit[t],onChange:function(t){e.onChangeEdit(t)}}),l.a.createElement(J.a,{show:e.state.nameMenuShow,as:z.a.Prepend,onToggle:e.onClickRootClose.bind(Object(m.a)(e))},l.a.createElement(J.a.Toggle,{variant:"outline-secondary",eventkey:"00"}," "),l.a.createElement(J.a.Menu,{rootCloseEvent:"click"},a.map((function(t){return l.a.createElement(J.a.Item,{key:G()(),onSelect:e.onSelectName.bind(Object(m.a)(e),t)},t)})))))))}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(B.a,{as:"input",name:t,value:e.state.dataToEdit[t],onChange:function(t){e.onChangeEdit(t)}})))}));return l.a.createElement("div",null," ",t," ")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.createEditFields(),a=this.props.toDateString(this.props.selectedDate);return l.a.createElement(P.a,{show:this.props.editModalShow,centered:!0,scrollable:!0,size:"lg",onExited:this.resetModal,onHide:this.closeModal,backdrop:"static"},l.a.createElement(P.a.Header,null,l.a.createElement("h5",{className:"modal-header-tag"}," Edit Training Data "),l.a.createElement("h5",{className:"modal-header-tag"}," ",a," ")),l.a.createElement(P.a.Body,null,t),this.state.showAlert?l.a.createElement(P.a.Footer,null,l.a.createElement(R.a,{className:"error-alert",variant:"danger",onClose:this.hideAlert.bind(this),dismissible:!0},l.a.createElement("p",null," ",this.state.alertMessage," ")),l.a.createElement("div",{className:"loader-container"},l.a.createElement(v.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,visible:this.props.isSaving})),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:this.closeModal}," Close "),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:function(t){e.saveEdit(t)}}," Save ")):l.a.createElement(P.a.Footer,null,l.a.createElement("div",{className:"loader-container"},l.a.createElement(v.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,visible:this.props.isSaving})),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:this.closeModal}," Close "),l.a.createElement(y.a,{variant:"primary",disabled:this.props.isSaving,onClick:function(t){e.saveEdit(t)}}," Save ")))}}]),a}(n.Component)),H=a(53),_=a(14),Y=a(70),W=a(36),X=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state=Object(b.a)({selectedDate:null,selectedDateString:null,minDate:null,isDataOnDate:null,hasLoaded:!1,displayData:null,eventKey:0,dataToEdit:null,editIndex:-1},"eventKey",-1),e.componentDidMount=function(){e.setState({selectedDate:e.formatNewDate(),selectedDateString:e.toDateString(e.formatNewDate())})},e.componentDidUpdate=function(){e.state.selectedDateString!==e.toDateString(e.state.selectedDate)&&e.setState({selectedDateString:e.toDateString(e.state.selectedDate),isDataOnDate:e.isSelectedDateInDateList()}),e.state.hasLoaded||null===e.props.data||e.setState({hasLoaded:!0,minDate:e.formatDate(e.props.data.birthday),isDataOnDate:e.isSelectedDateInDateList()}),e.props.dataToEdit!==e.props.dataToEdit&&e.setState({dataToEdit:e.props.dataToEdit}),e.state.eventKey>1e3&&e.setState({eventKey:-1})},e.onClickEdit=function(t){e.setState({editIndex:t}),e.props.toggleEditModal(e.props.data.userData[t])},e.reloadCalendar=function(){e.setState({hasLoaded:!1})},e.isSelectedDateInDateList=function(){if(null===e.props.data||void 0===e.props.data||null===e.state.selectedDate||void 0===e.state.selectedDate)return!1;for(var t=e.createDateList(),a=0;a<t.length;a++){if(t[a].getTime()===e.state.selectedDate.getTime())return!0}return!1},e.createDateList=function(){if(null===e.props.data||void 0===e.props.data)return null;for(var t=[],a=0;a<e.props.data.userData.length;a++){var n=e.props.data.userData[a].Date,l=e.formatDate(n);t.push(l)}return t},e.formatDate=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)},e.toDateString=function(e){return null===e||void 0===e?null:a(257)(e.toString(),"fullDate")},e.selectDay=function(t){e.setState({selectedDate:t})},e.deleteEntry=function(t){window.confirm("Are you sure you want to delete this entry?")&&(e.props.data.userData.splice(t,1),e.props.saveData(e.props.data,"delete","Calendar"))},e.sortByDisplayName=function(e){for(var t=e.displayOrder,a={},n=0;n<t.length;n++)a[t[n]]=e[t[n]];return a},e.calculateTotals=function(t){for(var a=[],n=0;n<e.props.data.metaData.entryTypes.length;n++){for(var l=e.props.data.metaData.entryTypes[n],r={Category:"",Type:"",calculationType:"",numOfEntries:0,total:0},o=0;o<t.length;o++){var s=t[o],i="";for(var d in s)isNaN(s[d])||0===s[d].length||(i=d);l.Category===s.Category&&l.Type===s.Type&&"none"!==l.calculationType&&""!==i&&(r.Category=s.Category,r.Type=s.Type,r.calculationType=l.calculationType,r.numOfEntries=r.numOfEntries+1,r.total=r.total+Number(s[i]))}""!==r.Category&&""!==r.Type&&"none"!==r.calculationType&&0!==r.total&&a.push(r)}if(0===a.length)return a;var c=[];for(n=0;n<a.length;n++){var u={};1===(r=a[n]).numOfEntries||"add"===r.calculationType?(u.Category=r.Category,u.Type=r.Type,u[r.Type]=r.total,u.calculationType=r.calculationType.charAt(0).toUpperCase()+r.calculationType.slice(1)):"average"===r.calculationType&&(u.Category=r.Category,u.Type=r.Type,u[r.Type]=(r.total/r.numOfEntries).toFixed(2),u.calculationType=r.calculationType.charAt(0).toUpperCase()+r.calculationType.slice(1)),c.push(u)}return c},e.goalAchieved=function(t){var a="Amount";for(var n in t)isNaN(t[n])||0===t[n].toString().trim().length||(a=n);for(var l=0;l<e.props.data.goals.length;l++){var r=e.props.data.goals[l];if(r["Goal Type"]===t.Category)if(r.deletable){var o=!1;for(var n in r.Fields)o=r.Fields[n]===t[n];if(o)return!0}else if(Number(r.Fields[t.Type])===Number(t[a]))return!0}return!1},e.displayData=function(){if(null===e.state.selectedDate||void 0===e.state.selectedDate||null===e.props.data||void 0===e.props.data)return null;for(var t=[],a=[],n=0;n<e.props.data.userData.length;n++)new Date(e.props.data.userData[n].Date).getTime()===e.state.selectedDate.getTime()&&(a.push(e.props.data.userData[n]),t.includes(e.props.data.userData[n].Category)||t.push(e.props.data.userData[n].Category));var r=e.calculateTotals(a),o=t.map((function(t,a){var n=G()();return l.a.createElement(_.a,{key:G.a},l.a.createElement(_.a.Header,null,l.a.createElement(H.a.Toggle,{as:y.a,variant:"link",eventKey:n},t)),l.a.createElement(H.a.Collapse,{eventKey:n},l.a.createElement(_.a.Body,null,e.props.data.userData.map((function(a,n){return new Date(a.Date).getTime()===e.state.selectedDate.getTime()&&t===a.Category?l.a.createElement("div",{key:G()()},e.goalAchieved(a)&&"none"===a.calculationType?l.a.createElement("div",null,l.a.createElement("div",null," Goal Achieved \ud83c\udfc6 "),l.a.createElement("br",null),a.displayOrder.map((function(t){if("Notes"!==t)return l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"40%"}}," ",l.a.createElement("strong",null," ",t," ")," "),l.a.createElement(q.a.Item,{style:{width:"60%"}}," ",a[t]," "));var r=l.a.createElement(W.a,null,l.a.createElement(W.a.Title,{as:"h3"}," ",t," "),l.a.createElement(W.a.Content,null," ",a[t]," "));return l.a.createElement("div",{key:G()()},l.a.createElement("br",null),l.a.createElement(Y.a,{trigger:"click",placement:"right",overlay:r,rootClose:!0},l.a.createElement(y.a,{variant:"success"}," ",t," ")),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.deleteEntry.bind(Object(m.a)(e),n)}," \ud83d\uddd1\ufe0f "),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.onClickEdit.bind(Object(m.a)(e),n)}," \u270f\ufe0f "),l.a.createElement("hr",{style:{border:"1px solid black"}}))}))):l.a.createElement("div",null,a.displayOrder.map((function(t){if("Notes"!==t)return l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"40%"}}," ",l.a.createElement("strong",null," ",t," ")," "),l.a.createElement(q.a.Item,{style:{width:"60%"}}," ",a[t]," "));var r=l.a.createElement(W.a,null,l.a.createElement(W.a.Title,{as:"h3"}," ",t," "),l.a.createElement(W.a.Content,null," ",a[t]," "));return l.a.createElement("div",{key:G()()},l.a.createElement("br",null),l.a.createElement(Y.a,{trigger:"click",placement:"right",overlay:r,rootClose:!0},l.a.createElement(y.a,{variant:"success"}," ",t," ")),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.deleteEntry.bind(Object(m.a)(e),n)}," \ud83d\uddd1\ufe0f "),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.onClickEdit.bind(Object(m.a)(e),n)}," \u270f\ufe0f "),l.a.createElement("hr",{style:{border:"1px solid black"}}))})))):null})))))}));return l.a.createElement(H.a,null,o,0!==r.length?l.a.createElement(_.a,{key:G()()},l.a.createElement(_.a.Header,null,l.a.createElement(H.a.Toggle,{as:y.a,variant:"link",eventKey:"total"},"Data Totals")),l.a.createElement(H.a.Collapse,{eventKey:"total"},l.a.createElement(_.a.Body,null,r.map((function(t){return e.goalAchieved(t)?l.a.createElement("div",null,l.a.createElement("div",null," Goal Achieved \ud83c\udfc6 "),l.a.createElement("br",null),l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",l.a.createElement("strong",null," ",t.Type," ")," "),l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",t[t.Type]," ")),l.a.createElement("hr",{style:{border:"1px solid black"}})):l.a.createElement("div",null,l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",l.a.createElement("strong",null," ",t.Type," ")," "),l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",t[t.Type]," ")),l.a.createElement("hr",{style:{border:"1px solid black"}}))}))))):l.a.createElement("div",null," "))},e}return Object(u.a)(n,[{key:"formatNewDate",value:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0)}},{key:"render",value:function(){var e=this,t=function(t){t.activeStartDate;var a=t.date,n=t.view;return null===e.props.data||void 0==e.props.data?null:"month"===n&&e.createDateList().find((function(e){return e.getTime()===a.getTime()}))?l.a.createElement("div",null," \ud83d\udcaa "):null},a=window.innerWidth,n=this.displayData();return l.a.createElement(D.a,{fluid:!0},l.a.createElement(w.a,null,l.a.createElement(K,{data:this.props.data,selectedDate:this.state.selectedDate,saveData:this.props.saveData,toDateString:this.toDateString,addModalShow:this.props.addModalShow,isSaving:this.props.isSaving,toggleAddModal:this.props.toggleAddModal,toggleSaveBar:this.props.toggleSaveBar,reloadCalendar:this.reloadCalendar,createDateList:this.createDateList})),l.a.createElement(w.a,null,l.a.createElement(V,{data:this.props.data,editModalShow:this.props.editModalShow,selectedDate:this.state.selectedDate,toDateString:this.toDateString,isSaving:this.props.isSaving,toggleEditModal:this.props.toggleEditModal,toggleSaveBar:this.props.toggleSaveBar,reloadCalendar:this.reloadCalendar,saveData:this.props.saveData,dataToEdit:this.props.dataToEdit,editIndex:this.state.editIndex})),a<500?l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(w.a,null,l.a.createElement("div",{className:"mobile-calendar-container"},l.a.createElement(w.a,{style:{marginBottom:"5%"}},l.a.createElement(C.a,null,l.a.createElement(j.a,{minDate:this.state.minDate,showNeighboringMonth:!1,onClickDay:this.selectDay,tileContent:t}))),l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:10},l.a.createElement("h6",{className:"date-string"},this.state.selectedDateString),l.a.createElement(y.a,{variant:"primary",className:"add-data-button",onClick:this.props.toggleAddModal}," + "))),l.a.createElement(w.a,null,l.a.createElement(C.a,null,this.state.isDataOnDate?l.a.createElement("div",null,n):l.a.createElement("p",{style:{marginLeft:"1%"}}," Nothing to see here... "))))))):l.a.createElement(w.a,null,l.a.createElement(C.a,{md:5},this.state.isDataOnDate?l.a.createElement("div",{className:"box-container"},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("h4",{className:"date-string"},this.state.selectedDateString)),l.a.createElement(C.a,null,l.a.createElement(y.a,{variant:"primary",className:"add-data-button",onClick:this.props.toggleAddModal}," + "))),l.a.createElement(w.a,null,l.a.createElement(C.a,null,n))):l.a.createElement("div",{className:"box-container"},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("h4",{className:"date-string"},this.state.selectedDateString)),l.a.createElement(C.a,null,l.a.createElement(y.a,{variant:"primary",className:"add-data-button",onClick:this.props.toggleAddModal}," + "))),l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},l.a.createElement("p",{style:{marginLeft:"1%"}}," Nothing to see here... "))))),l.a.createElement(C.a,{md:7},l.a.createElement("div",{className:"calendar-container"},l.a.createElement(j.a,{minDate:this.state.minDate,showNeighboringMonth:!1,onClickDay:this.selectDay,tileContent:t})))))}}]),n}(n.Component),$=a(78),Q=(a(645),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={testData:[{name:"test1",data:1},{name:"test2",data:2},{name:"test3",data:3},{name:"test4",data:4}],graphOption:"Graph Options",startDate:null,endDate:null,graphData:[],lineColors:["Aqua","Black","Blue","BlueViolet","Brown","Chocolate","Crimson","DarkGreen","DeepPink","LightSeaGreen","Maroon","Navy","Olive","MidnightBlue","Tomato"],usedColors:[],colorIndex:-1,graphFilters:[],rangeValue:null},e.componentDidUpdate=function(){e.state.colorIndex>e.state.lineColors.length&&e.setState({colorIndex:-1})},e.onSelectOption=function(t){e.setState({graphOption:t,graphFilters:[]})},e.onSelectStartDate=function(t){e.setState({startDate:t})},e.onSelectEndDate=function(t){e.setState({endDate:t})},e.onChangeSlider=function(t){e.setState({rangeValue:t.target.value})},e.onSelectFilter=function(t){var a=e.state.graphFilters.slice();if(!a.includes(t))return a.push(t),void e.setState({graphFilters:a});a.splice(a.indexOf(t),1),e.setState({graphFilters:a})},e.createOptionDropdown=function(){return null===e.props.data||void 0===e.props.data?null:l.a.createElement(J.a,{className:"options-button"},l.a.createElement(J.a.Toggle,{variant:"primary"},e.state.graphOption),l.a.createElement(J.a.Menu,null,e.props.data.metaData.categories.map((function(t,a){return l.a.createElement("div",null,l.a.createElement(J.a.Header,null,l.a.createElement("strong",null," ",t," ")),e.props.data.metaData.entryTypes.map((function(a){if(t===a.Category)for(var n in a)if("number"===a[n])return l.a.createElement(J.a.Item,{onSelect:e.onSelectOption.bind(Object(m.a)(e),a.Type)},a.Type)})))}))))},e.createDateDropdown=function(){return l.a.createElement(J.a,{className:"options-button"},l.a.createElement(J.a.Toggle,{variant:"primary"},"Date Range"),l.a.createElement(J.a.Menu,null,l.a.createElement(J.a.Item,{as:e.dateOption}," ")))},e.filterGraphData=function(t){if(null===e.state.graphFilters||0===e.state.graphFilters.length||null===t||0===t.length)return null;for(var a=[],n=[],l=0;l<t.length;l++)for(var r=t[l],o=0;o<e.state.graphFilters.length;o++){var s=e.state.graphFilters[o];for(var i in r)r[i]===s?a.push(r):isNaN(r[s])||n.includes(s)||n.push(s)}if(0===a.length){for(l=0;l<t.length;l++){r=t[l];var d={};for(o=0;o<e.state.graphFilters.length;o++){s=e.state.graphFilters[o];Object.keys(r).includes(s)&&(d[s]=r[s])}d.Name=r.Name,d.Date=r.Date,a.push(d)}return a}if(0===n.length)return a;var c=[];for(l=0;l<a.length;l++){r=a[l],d={};for(o=0;o<e.state.graphFilters.length;o++){s=e.state.graphFilters[o];Object.keys(r).includes(s)&&(d[s]=r[s])}d.Name=r.Name,d.Date=r.Date,c.push(d)}return c},e.getGraphData=function(){var t=[];if(null===e.state.startDate||null===e.state.endDate||"Graph Options"===e.state.graphOption||e.state.startDate.getTime()>e.state.endDate.getTime())return null;for(var a=0;a<e.props.data.userData.length;a++){var n=e.props.data.userData[a],l=new Date(n.Date);if(e.state.startDate.getTime()<=l.getTime()&&l.getTime()<=e.state.endDate.getTime()&&n.Type===e.state.graphOption){var r={};for(var o in n)(!isNaN(Number(n[o]))&&0!==n[o].length||"Name"===o)&&(r[o]=n[o]);r.Date=l.toLocaleDateString(),t.push(r)}}for(a=0;a<t.length;a++){for(var s=a,i=a+1;i<t.length;i++)new Date(t[s].Date).getTime()>new Date(t[i].Date).getTime()&&(s=i);if(s!==a){var d=t[a];t[a]=t[s],t[s]=d}}return t},e.createLines=function(t){if(null===t)return null;for(var a=[],n=0;n<t.length;n++){var r=t[n];for(var o in r)(!isNaN(Number(r[o]))&&0!==r[o].length&&!a.includes(o)||"Name"===o&&!a.includes(o))&&a.push(o)}return a.map((function(t,a){return l.a.createElement($.c,{dataKey:t,stroke:e.state.lineColors[a]})}))},e.getLegendData=function(t){if(null===t)return null;for(var a=[],n=0;n<t.length;n++){var l=t[n];for(var r in l)0===l[r].length||a.includes(r)||"Date"===r||"Notes"===r||a.push(r)}for(1===a.length?e.state.colorIndex:e.state.colorIndex-a.length,n=0;n<a.length;n++)a[n]={color:e.state.lineColors[n],dataKey:a[n],type:"line",value:a[n]};return a},e.createStringFilters=function(t){if(null===t||void 0===t||0===t.length)return l.a.createElement("div",null," ");for(var a=[],n=[],r=0;r<t.length;r++){var o=t[r];for(var s in o)(!isNaN(Number(o[s]))&&0!==o[s].length&&!a.includes(s)||e.props.data.metaData.graphFilterConstants.includes(s)&&!a.includes(s))&&a.push(s)}if(a.length<1)return l.a.createElement("div",null," ");for(r=0;r<a.length;r++){var i=a[r];isNaN(t[0][i])||n.push(i);for(var d=0;d<t.length;d++)isNaN(t[d][i])&&!n.includes(t[d][i])&&n.push(t[d][i])}return null===n||void 0===n||0===n.length?l.a.createElement("div",null," "):l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null,"Show By"),1===n.length?l.a.createElement(N.a.Check,{type:"checkbox",label:n[0],onClick:e.onSelectFilter.bind(Object(m.a)(e),n[0])}):l.a.createElement("div",null,n.map((function(t){return l.a.createElement(N.a.Check,{type:"checkbox",label:t,onClick:e.onSelectFilter.bind(Object(m.a)(e),t)})})))))},e.createNumFilters=function(t){if(null===t)return null;var a,n=[];if(0===e.state.graphFilters.length){for(var r=0;r<t.length;r++){var o=t[r];for(var s in o)isNaN(o[s])||n.includes(s)||n.push(s)}if(0===n.length)return null;a=n.map((function(e,t){return l.a.createElement(N.a,null,l.a.createElement(N.a.Group,{controlId:t},l.a.createElement(N.a.Label,null," ",e," "),l.a.createElement(N.a.Control,{type:"range"})))}))}else{for(r=0;r<t.length;r++){o=t[r];for(var s in o)isNaN(o[s])||n.includes(s)||e.state.graphFilters.includes(s)||n.push(s)}if(0===n.length)return null;a=n.map((function(e,t){return l.a.createElement(N.a,null,l.a.createElement(N.a.Group,{controlId:t},l.a.createElement(N.a.Label,null," ",e," "),l.a.createElement(N.a.Control,{type:"range"})))}))}return a},e.getMaxValue=function(t){if(null===t||void 0===t)return null;for(var a=0,n=0;n<t.length;n++){var l=t[n];for(var r in l)isNaN(l[r])||Number(l[r])>a&&(a=Number(l[r]))}return null===e.state.rangeValue&&(e.state.rangeValue=a),a},e}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=l.a.createElement(N.a.Control,{type:"input"}),n=l.a.createElement(N.a.Control,{type:"input"}),r=this.createOptionDropdown(),o=this.getGraphData(),s=this.createStringFilters(o),i=(this.createNumFilters(o),this.filterGraphData(o));return null!==i?(e=this.createLines(i),t=this.getMaxValue(i),o=i):(e=this.createLines(o),t=this.getMaxValue(o)),l.a.createElement(D.a,{fluid:!0},l.a.createElement(w.a,null,l.a.createElement(C.a,{lg:2},l.a.createElement(w.a,null,l.a.createElement(C.a,null,r)),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("p",null," ",l.a.createElement("u",null," Start Date ")," "))),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(A.a,{selected:this.state.startDate,onChange:this.onSelectStartDate,customInput:a,placeholderText:"mm/dd/yyyy"}))))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("p",null," ",l.a.createElement("u",null," End Date ")," "))),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(A.a,{selected:this.state.endDate,onChange:this.onSelectEndDate,customInput:n,placeholderText:"mm/dd/yyyy"}))))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,s)),l.a.createElement("br",null),l.a.createElement(w.a,null)),l.a.createElement(C.a,{lg:10},l.a.createElement("div",{className:"graph-container"},null===o?l.a.createElement("h3",null," ",l.a.createElement("i",null," Graph Title ")," "):l.a.createElement("h3",null," ",this.state.graphOption," "),l.a.createElement($.e,null,l.a.createElement($.d,{data:o},l.a.createElement($.g,{dataKey:"Date"}),l.a.createElement($.h,{type:"number",domain:[0,t]}),l.a.createElement($.a,{strokeDasharray:"3 3"}),l.a.createElement($.f,null),l.a.createElement($.b,null),e))))))}}]),a}(n.Component)),Z=(a(646),function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={startDate:null,endDate:null,listOption:"List Options",listFilters:[],allChecked:!0,selectedDate:null},e.onSelectOption=function(t){var a=e.state.listFilters.slice();"All"!==t?(a.includes(t)?a.includes(t)&&a.splice(a.indexOf(t),1):a.push(t),e.setState({listFilters:a,allChecked:!1})):e.setState({listFilters:[],allChecked:!e.state.allChecked})},e.toggleAddModal=function(){var t=Object(d.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({selectedDate:new Date(a)});case 2:e.props.toggleAddModal();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSelectEndDate=function(t){e.setState({endDate:t})},e.onSelectStartDate=function(t){e.setState({startDate:t})},e.onClickEdit=function(){var t=Object(d.a)(i.a.mark((function t(a,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({editIndex:a,selectedDate:new Date(n)});case 2:e.props.toggleEditModal(e.props.data.userData[a]);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.deleteEntry=function(t){window.confirm("Are you sure you want to delete this entry?")&&(e.props.data.userData.splice(t,1),e.props.saveData(e.props.data,"delete","Calendar"))},e.reload=function(){e.forceUpdate()},e.goalAchieved=function(t){var a="Amount";for(var n in t)isNaN(t[n])||0===t[n].toString().trim().length||(a=n);for(var l=0;l<e.props.data.goals.length;l++){var r=e.props.data.goals[l];if(r["Goal Type"]===t.Category)if(r.deletable){var o=!1;for(n in r.Fields)o=r.Fields[n]===t[n];if(o)return!0}else if(Number(r.Fields[t.Type])===Number(t[a]))return!0}return!1},e.createOptionDropdown=function(){return null===e.props.data||void 0===e.props.data?null:l.a.createElement(J.a,null,l.a.createElement(J.a.Toggle,{variant:"primary"},e.state.listOption),l.a.createElement(J.a.Menu,null,l.a.createElement("div",{style:{margin:"5%"}},null===e.state.startDate||null===e.state.endDate||e.state.startDate.getTime()>e.state.endDate.getTime()?l.a.createElement(N.a.Check,{type:"checkbox",label:"All",checked:!0,disabled:!0,onChange:e.onSelectOption.bind(Object(m.a)(e),"All")}):l.a.createElement(N.a.Check,{type:"checkbox",label:"All",checked:e.state.allChecked,onChange:e.onSelectOption.bind(Object(m.a)(e),"All")})),e.props.data.metaData.categories.map((function(t,a){return l.a.createElement("div",null,l.a.createElement(J.a.Header,null,l.a.createElement("strong",null," ",t," ")),e.props.data.metaData.entryTypes.map((function(a){if(t===a.Category)return null===e.state.startDate||null===e.state.endDate||e.state.startDate.getTime()>e.state.endDate.getTime()?l.a.createElement("div",{style:{margin:"5%"}},l.a.createElement(N.a.Check,{type:"checkbox",label:a.Type,checked:!1,disabled:!0,onChange:e.onSelectOption.bind(Object(m.a)(e),a.Type)})):0===e.state.listFilters.length?l.a.createElement("div",{style:{margin:"5%"}},l.a.createElement(N.a.Check,{type:"checkbox",label:a.Type,checked:!1,onChange:e.onSelectOption.bind(Object(m.a)(e),a.Type)})):l.a.createElement("div",{style:{margin:"5%"}},l.a.createElement(N.a.Check,{type:"checkbox",label:a.Type,onChange:e.onSelectOption.bind(Object(m.a)(e),a.Type)}))})))}))))},e.calculateTotals=function(t){for(var a=[],n=0;n<e.props.data.metaData.entryTypes.length;n++){for(var l=e.props.data.metaData.entryTypes[n],r={Category:"",Type:"",calculationType:"",numOfEntries:0,total:0},o=0;o<t.length;o++){var s=t[o],i="";for(var d in s)isNaN(s[d])||0===s[d].length||(i=d);l.Category===s.Category&&l.Type===s.Type&&"none"!==l.calculationType&&""!==i&&(r.Category=s.Category,r.Type=s.Type,r.calculationType=l.calculationType,r.numOfEntries=r.numOfEntries+1,r.total=r.total+Number(s[i]))}""!==r.Category&&""!==r.Type&&"none"!==r.calculationType&&0!==r.total&&a.push(r)}if(0===a.length)return a;var c=[];for(n=0;n<a.length;n++){var u={};1===(r=a[n]).numOfEntries||"add"===r.calculationType?(u.Category=r.Category,u.Type=r.Type,u.Amount=r.total,u.calculationType=r.calculationType.charAt(0).toUpperCase()+r.calculationType.slice(1)):"average"===r.calculationType&&(u.Category=r.Category,u.Type=r.Type,u.Amount=(r.total/r.numOfEntries).toFixed(2),u.calculationType=r.calculationType.charAt(0).toUpperCase()+r.calculationType.slice(1)),c.push(u)}return c},e.toDateString=function(e){return null===e||void 0===e?null:a(257)(e.toString(),"fullDate")},e.getListData=function(){var t=[];if(null===e.state.startDate||null===e.state.endDate||e.state.startDate.getTime()>e.state.endDate.getTime())return null;if(0===e.state.listFilters.length&&!e.state.allChecked)return null;if(0===e.state.listFilters.length&&e.state.allChecked)for(var a=0;a<e.props.data.userData.length;a++){var n=e.props.data.userData[a],l=new Date(n.Date);e.state.startDate.getTime()<=l.getTime()&&l.getTime()<=e.state.endDate.getTime()&&(n.Date=l.toLocaleDateString(),t.push(n))}else for(a=0;a<e.props.data.userData.length;a++){var r=e.props.data.userData[a],o=new Date(r.Date);e.state.startDate.getTime()<=o.getTime()&&o.getTime()<=e.state.endDate.getTime()&&e.state.listFilters.includes(r.Type)&&t.push(r)}for(a=0;a<t.length;a++){for(var s=a,i=a+1;i<t.length;i++)new Date(t[s].Date).getTime()>new Date(t[i].Date).getTime()&&(s=i);if(s!==a){var d=t[a];t[a]=t[s],t[s]=d}}return t},e.displayData=function(t){if(null===t||void 0===t)return null;for(var a=[],n=0;n<t.length;n++)if(e.state.startDate.getTime()<=new Date(t[n].Date).getTime()&&new Date(t[n].Date).getTime()<=e.state.endDate.getTime()){var r=e.toDateString(new Date(t[n].Date));a.includes(r)||a.push(r)}var o=a.map((function(t,a){var n=[];return l.a.createElement(_.a,{key:G()()},l.a.createElement(_.a.Header,null,l.a.createElement(y.a,{variant:"primary",onClick:e.toggleAddModal.bind(Object(m.a)(e),t),style:{float:"right"}}," + "),l.a.createElement(H.a.Toggle,{as:y.a,variant:"link",eventKey:a},t)),l.a.createElement(H.a.Collapse,{eventKey:a},l.a.createElement(_.a.Body,null,e.props.data.userData.map((function(a,r){if(0===e.state.listFilters.length){if(new Date(a.Date).getTime()===new Date(t).getTime())return n.push(a),e.goalAchieved(a)&&"none"===a.calculationType?l.a.createElement("div",null,l.a.createElement("div",null," Goal Achieved \ud83c\udfc6 "),l.a.createElement("br",null),a.displayOrder.map((function(n){if("Notes"!==n)return l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"40%"}}," ",l.a.createElement("strong",null," ",n," ")," "),l.a.createElement(q.a.Item,{style:{width:"60%"}}," ",a[n]," "));var o=l.a.createElement(W.a,null,l.a.createElement(W.a.Title,{as:"h3"}," ",n," "),l.a.createElement(W.a.Content,null," ",a[n]," "));return l.a.createElement("div",{key:G()()},l.a.createElement("br",null),l.a.createElement(Y.a,{trigger:"click",placement:"right",overlay:o,rootClose:!0},l.a.createElement(y.a,{variant:"success"}," ",n," ")),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.deleteEntry.bind(Object(m.a)(e),r)}," \ud83d\uddd1\ufe0f "),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.onClickEdit.bind(Object(m.a)(e),r,t)}," \u270f\ufe0f "),l.a.createElement("hr",{style:{border:"1px solid black"}}))}))):a.displayOrder.map((function(n){if("Notes"!==n)return l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"40%"}}," ",l.a.createElement("strong",null," ",n," ")," "),l.a.createElement(q.a.Item,{style:{width:"60%"}}," ",a[n]," "));var o=l.a.createElement(W.a,null,l.a.createElement(W.a.Title,{as:"h3"}," ",n," "),l.a.createElement(W.a.Content,null," ",a[n]," "));return l.a.createElement("div",{key:G()()},l.a.createElement("br",null),l.a.createElement(Y.a,{trigger:"click",placement:"right",overlay:o,rootClose:!0},l.a.createElement(y.a,{variant:"success"}," ",n," ")),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.deleteEntry.bind(Object(m.a)(e),r)}," \ud83d\uddd1\ufe0f "),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.onClickEdit.bind(Object(m.a)(e),r,t)}," \u270f\ufe0f "),l.a.createElement("hr",{style:{border:"1px solid black"}}))}))}else if(new Date(a.Date).getTime()===new Date(t).getTime()&&e.state.listFilters.includes(a.Type))return n.push(a),e.goalAchieved(a)&&"none"===a.calculationType?l.a.createElement("div",null,l.a.createElement("div",null," Goal Achieved \ud83c\udfc6 "),l.a.createElement("br",null),a.displayOrder.map((function(n){if("Notes"!==n)return l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"40%"}}," ",l.a.createElement("strong",null," ",n," ")," "),l.a.createElement(q.a.Item,{style:{width:"60%"}}," ",a[n]," "));var o=l.a.createElement(W.a,null,l.a.createElement(W.a.Title,{as:"h3"}," ",n," "),l.a.createElement(W.a.Content,null," ",a[n]," "));return l.a.createElement("div",{key:G()()},l.a.createElement("br",null),l.a.createElement(Y.a,{trigger:"click",placement:"right",overlay:o,rootClose:!0},l.a.createElement(y.a,{variant:"success"}," ",n," ")),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.deleteEntry.bind(Object(m.a)(e),r)}," \ud83d\uddd1\ufe0f "),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.onClickEdit.bind(Object(m.a)(e),r,t)}," \u270f\ufe0f "),l.a.createElement("hr",{style:{border:"1px solid black"}}))}))):a.displayOrder.map((function(n){if("Notes"!==n)return l.a.createElement(q.a,{horizontal:!0,key:G()()},l.a.createElement(q.a.Item,{style:{width:"40%"}}," ",l.a.createElement("strong",null," ",n," ")," "),l.a.createElement(q.a.Item,{style:{width:"60%"}}," ",a[n]," "));var o=l.a.createElement(W.a,null,l.a.createElement(W.a.Title,{as:"h3"}," ",n," "),l.a.createElement(W.a.Content,null," ",a[n]," "));return l.a.createElement("div",{key:G()()},l.a.createElement("br",null),l.a.createElement(Y.a,{trigger:"click",placement:"right",overlay:o,rootClose:!0},l.a.createElement(y.a,{variant:"success"}," ",n," ")),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.deleteEntry.bind(Object(m.a)(e),r)}," \ud83d\uddd1\ufe0f "),l.a.createElement(y.a,{variant:"light",className:"deleteEditButtons",onClick:e.onClickEdit.bind(Object(m.a)(e),r,t)}," \u270f\ufe0f "),l.a.createElement("hr",{style:{border:"1px solid black"}}))}))})),l.a.createElement("div",null,e.calculateTotals(n).map((function(t){return e.goalAchieved(t)?l.a.createElement("div",null,l.a.createElement("div",null," Goal Achieved \ud83c\udfc6 "),l.a.createElement("br",null),l.a.createElement(q.a,{horizontal:!0,key:G()()},"Add"===t.calculationType?l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",l.a.createElement("strong",null," Total ",t.Type,": ")," "):l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",l.a.createElement("strong",null," ",t.calculationType," ",t.Type,": ")," "),l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",t.Amount," "))):l.a.createElement(q.a,{horizontal:!0,key:G()()},"Add"===t.calculationType?l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",l.a.createElement("strong",null," Total ",t.Type,": ")," "):l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",l.a.createElement("strong",null," ",t.calculationType," ",t.Type,": ")," "),l.a.createElement(q.a.Item,{style:{width:"50%"}}," ",t.Amount," "))}))))))}));return l.a.createElement(H.a,null,o)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=l.a.createElement(N.a.Control,{type:"input"}),t=l.a.createElement(N.a.Control,{type:"input"}),a=this.createOptionDropdown(),n=this.getListData(),r=this.displayData(n);return l.a.createElement(D.a,{fluid:!0},null===this.state.selectedDate?l.a.createElement("div",null," "):l.a.createElement(w.a,null,l.a.createElement(K,{data:this.props.data,selectedDate:this.state.selectedDate,saveData:this.props.saveData,toDateString:this.toDateString,addModalShow:this.props.addModalShow,isSaving:this.props.isSaving,toggleAddModal:this.props.toggleAddModal,toggleSaveBar:this.props.toggleSaveBar,reloadCalendar:this.reload,createDateList:this.createDateList}),l.a.createElement(V,{data:this.props.data,editModalShow:this.props.editModalShow,selectedDate:this.state.selectedDate,toDateString:this.toDateString,isSaving:this.props.isSaving,toggleEditModal:this.props.toggleEditModal,toggleSaveBar:this.props.toggleSaveBar,reloadCalendar:this.reload,saveData:this.props.saveData,dataToEdit:this.props.dataToEdit,editIndex:this.state.editIndex})),l.a.createElement(w.a,null,l.a.createElement(C.a,{lg:2},l.a.createElement(w.a,null,l.a.createElement(C.a,null,a)),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("p",null," ",l.a.createElement("u",null," Start Date ")," "))),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(A.a,{selected:this.state.startDate,onChange:this.onSelectStartDate,customInput:e,placeholderText:"mm/dd/yyyy"}))))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,{style:{marginBottom:"1%"}},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("p",null," ",l.a.createElement("u",null," End Date ")," "))),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(A.a,{selected:this.state.endDate,onChange:this.onSelectEndDate,customInput:t,placeholderText:"mm/dd/yyyy"}))))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,this.state.allChecked?l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null,"Options Selected"),l.a.createElement(_.a.Text,null,l.a.createElement("li",null," All ")))):l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null,"Options Selected"),l.a.createElement(_.a.Text,null,this.state.listFilters.map((function(e){return l.a.createElement("li",null," ",e," ")})))))))),l.a.createElement(C.a,{lg:10},l.a.createElement("div",{className:"list-container"},null===this.state.startDate||null===this.state.endDate||this.state.startDate.getTime()>this.state.endDate.getTime()?l.a.createElement("h3",null," ",l.a.createElement("i",null," Select a start and end date to view your training data. ")," "):l.a.createElement("div",null,r)))))}}]),n}(n.Component)),ee=a(331),te=a.n(ee),ae=a(332),ne=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={editing:!1,adding:!1,goalEditing:"",goalAdding:"",editingData:{},addingData:{},goalIndex:-1,data:null,invalidFields:!1,alertMessage:"",colors:["#0088FE","#00C49F","#FFBB28","#FF8042"],nameMenuShow:!1},e.componentDidMount=function(){e.setState({data:e.props.data})},e.openEditModal=function(t,a){var n=e.state.data.goals[a];e.setState({editing:!0,goalEditing:t,editingData:n,goalIndex:a})},e.closeEditModal=function(){e.setState({editing:!1,goalEditing:"",editingData:{},goalIndex:-1,alertMessage:"",invalidFields:!1})},e.openAddModal=function(t){var a={};for(var n in e.state.data.metaData.goalStructure)a[n]=e.state.data.metaData.goalStructure[n];a["Goal Type"]=t,a.Fields={};for(var l=0;l<e.state.data.metaData.entryTypes.length;l++){t===e.state.data.metaData.entryTypes[l].Category&&(a.Fields.Type="")}e.setState({adding:!0,goalAdding:t,addingData:a})},e.closeAddModal=function(){e.setState({adding:!1,goalAdding:"",addingData:{},alertMessage:"",invalidFields:!1})},e.onChangeEdit=function(t){var a=t.target.name,n=t.target.value,l=JSON.parse(JSON.stringify(e.state.editingData));l.Fields[a]=n,e.setState({editingData:l})},e.onClickRootClose=function(){e.state.nameMenuShow?e.setState({nameMenuShow:!1}):e.setState({nameMenuShow:!0})},e.showNameList=function(t){0===t.length?e.setState({nameMenuShow:!1}):e.setState({nameMenuShow:!0})},e.onSelectName=function(t){var a=JSON.parse(JSON.stringify(e.state.addingData));a.Fields.Name=t,e.setState({addingData:a})},e.onChangeAdd=function(t){var a=t.target.name,n=t.target.value,l=JSON.parse(JSON.stringify(e.state.addingData));if("Type"===a){l.Fields={},l.Fields[a]=n;for(var r=0;r<e.state.data.metaData.entryTypes.length;r++){var o=e.state.data.metaData.entryTypes[r];if(o.Category===e.state.goalAdding&&o.Type===n){for(var s=0;s<o.displayOrder.length;s++){var i=o.displayOrder[s];"string"===o[i]&&"Notes"!==i&&"Category"!==i?l.Fields[i]="":"number"===o[i]&&(l.Fields[i]=0)}break}}}else"Name"===a?(e.showNameList(n),l.Fields[a]=n):l.Fields[a]=n;e.setState({addingData:l})},e.deleteGoal=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=JSON.parse(JSON.stringify(e.state.data)),!window.confirm("Are you sure you want to delete this goal?")){t.next=6;break}return n.goals.splice(a,1),e.setState({data:n}),t.next=6,e.props.saveData(n,"save","Goals");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showAlert=function(t){e.setState({invalidFields:!0,alertMessage:t})},e.hideAlert=function(){e.setState({invalidFields:!1,alertMessage:""})},e.checkEditFields=function(){for(var t=null,a=0;a<e.state.data.metaData.entryTypes.length;a++){var n=e.state.data.metaData.entryTypes[a];if(n.Category===e.state.editingData["Goal Type"]&&Object.keys(e.state.editingData.Fields).includes(n.Type)){t=n;break}if(n.Category===e.state.editingData["Goal Type"]&&e.state.editingData.Fields.Type===n.Type){t=n;break}}if(null!==t){for(var l in e.state.editingData.Fields){if(0===e.state.editingData.Fields[l].toString().trim().length)return e.showAlert("Cannot save data. You're missing some required fields!"),!1;if("number"===t[l]&&isNaN(e.state.editingData.Fields[l]))return e.showAlert("'"+l+"' must be a number!"),!1}return!0}alert("Sorry, an error occurred -- you cannot update this goal")},e.checkAddFields=function(){for(var t=null,a=0;a<e.state.data.metaData.entryTypes.length;a++){var n=e.state.data.metaData.entryTypes[a];if(n.Category===e.state.addingData["Goal Type"]&&n.Type===e.state.addingData.Fields.Type){t=n;break}}for(var l in e.state.addingData.Fields){if(0===e.state.addingData.Fields[l].toString().trim().length)return e.showAlert("Cannot save data. You're missing some required fields!"),!1;if("number"===t[l]&&isNaN(e.state.addingData.Fields[l]))return e.showAlert("'"+l+"' must be a number!"),!1}return!0},e.onClickSaveEdit=Object(d.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkEditFields()){t.next=11;break}for(n in a=JSON.parse(JSON.stringify(e.state.data)),e.state.editingData.Fields)e.state.editingData.Fields[n]=e.state.editingData.Fields[n].toString().trim();return e.state.editingData.lastUpdated=new Date,a.goals[e.state.goalIndex]=e.state.editingData,e.setState({data:a}),t.next=8,e.props.saveData(a,"save","Goals");case 8:e.closeEditModal(),t.next=12;break;case 11:return t.abrupt("return");case 12:case"end":return t.stop()}}),t)}))),e.onClickSaveAdd=Object(d.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkAddFields()){t.next=12;break}for(n in a=JSON.parse(JSON.stringify(e.state.data)),e.state.addingData.Fields)e.state.addingData.Fields[n]=e.state.addingData.Fields[n].toString().trim();return e.state.addingData.lastUpdated=new Date,e.state.addingData.fieldOrder=Object.keys(e.state.addingData.Fields),a.goals.push(e.state.addingData),e.setState({data:a}),t.next=9,e.props.saveData(a,"save","Goals");case 9:e.closeAddModal(),t.next=13;break;case 12:return t.abrupt("return");case 13:case"end":return t.stop()}}),t)}))),e.validateMacros=function(){var t=0;for(var a in e.state.editingData.Fields)"Calories"!==a&&(t+=Number(e.state.editingData.Fields[a]));return 100===t||(e.showAlert("Macronutrients must total 100%"),!1)},e.constructPieData=function(e){var t=[],a=[];for(var n in e)"Calories"===n||isNaN(e[n])||(t.push(e[n]),a.push(n));return{datasets:[{data:t,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#484a47","#a37774","#e88873","#e0ac9d","#7ebdc2","#f3dfa2","#efe6dd"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#484a47","#a37774","#e88873","#e0ac9d","#7ebdc2","#f3dfa2","#efe6dd"]}],labels:a}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return null===this.state.data?l.a.createElement("div",null," "):l.a.createElement(D.a,{fluid:!0},this.state.editing?l.a.createElement(P.a,{size:"lg",show:this.state.editing,onHide:this.closeEditModal.bind(this)},l.a.createElement(P.a.Header,{closeButton:!0},l.a.createElement(P.a.Title,{as:"h5"}," Edit ",this.state.goalEditing," Goal ")),l.a.createElement(P.a.Body,null,this.state.editingData.deletable?l.a.createElement("div",null,this.state.editingData.fieldOrder.map((function(t){if("Type"===t)return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(N.a.Control,{as:"select",name:t,value:e.state.editingData.Fields[t],onChange:function(t){e.onChangeEdit(t)},disabled:!0},l.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0}," Select "),e.props.data.metaData.entryTypes.map((function(t){if(e.state.goalEditing===t.Category)return l.a.createElement("option",{value:t.Type}," ",t.Type," ")})))));if("Name"===t){for(var a=[],n=0;n<e.state.data.entryNames.length;n++){var r=e.state.data.entryNames[n];e.state.goalEditing===r.Category&&e.state.editingData.Fields.Type===r.Type&&a.push(r.Name)}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(z.a,null,l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.editingData.Fields[t],onChange:function(t){e.onChangeEdit(t)}}),l.a.createElement(J.a,{show:e.state.nameMenuShow,as:z.a.Prepend,onToggle:e.onClickRootClose.bind(e)},l.a.createElement(J.a.Toggle,{variant:"outline-secondary",eventKey:"00"}," "),l.a.createElement(J.a.Menu,{rootCloseEvent:"click"},a.map((function(t){return l.a.createElement(J.a.Item,{onSelect:e.onSelectName.bind(e,t)},t)})))))))}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.editingData.Fields[t],onChange:function(t){e.onChangeEdit(t)}})))}))):l.a.createElement("div",null,this.state.editingData.fieldOrder.map((function(t){return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.editingData.Fields[t],onChange:function(t){e.onChangeEdit(t)}})))})))),l.a.createElement(P.a.Footer,null,this.state.invalidFields?l.a.createElement(R.a,{show:this.state.invalidFields,variant:"danger",onClose:this.hideAlert.bind(this),dismissible:!0},l.a.createElement("p",null," ",this.state.alertMessage," ")):l.a.createElement("div",null," "),l.a.createElement(y.a,{variant:"secondary",onClick:this.closeEditModal.bind(this)}," Close "),l.a.createElement(y.a,{variant:"primary",onClick:this.onClickSaveEdit.bind(this)}," Save "))):l.a.createElement("div",null," "),this.state.adding?l.a.createElement(P.a,{size:"lg",show:this.state.adding,onHide:this.closeAddModal.bind(this)},l.a.createElement(P.a.Header,{closeButton:!0},l.a.createElement(P.a.Title,{as:"h5"}," Add ",this.state.goalAdding," Goal ")),l.a.createElement(P.a.Body,null,"Diet"!==this.state.goalAdding&&"Body"!==this.state.goalAdding?l.a.createElement("div",null,Object.keys(this.state.addingData.Fields).map((function(t){if("Type"===t)return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(N.a.Control,{as:"select",name:t,value:e.state.addingData.Fields[t],onChange:function(t){e.onChangeAdd(t)}},l.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0}," Select "),e.props.data.metaData.entryTypes.map((function(t){if(e.state.goalAdding===t.Category)return l.a.createElement("option",{value:t.Type}," ",t.Type," ")})))));if("Name"===t){for(var a=[],n=0;n<e.state.data.entryNames.length;n++){var r=e.state.data.entryNames[n];e.state.goalAdding===r.Category&&e.state.addingData.Fields.Type===r.Type&&a.push(r.Name)}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(z.a,null,l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.addingData.Fields[t],onChange:function(t){e.onChangeAdd(t)}}),l.a.createElement(J.a,{show:e.state.nameMenuShow,as:z.a.Prepend,onToggle:e.onClickRootClose.bind(e)},l.a.createElement(J.a.Toggle,{variant:"outline-secondary",eventKey:"00"}," "),l.a.createElement(J.a.Menu,{rootCloseEvent:"click"},a.map((function(t){return l.a.createElement(J.a.Item,{onSelect:e.onSelectName.bind(e,t)},t)})))))))}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(N.a.Control,{as:"input",name:t,value:e.state.addingData.Fields[t],onChange:function(t){e.onChangeAdd(t)}})))}))):l.a.createElement("div",null,Object.keys(this.state.addingData.Fields).map((function(t){if("Type"===t){var a=l.a.createElement(ae.a,null," The default ",e.state.goalAdding," fields cannot be edited, deleted, or added. If you want to add additional ",e.state.goalAdding," goals, then add a new Type under the Customize Data tab in your Profile page. ");return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t,l.a.createElement(Y.a,{placement:"right",delay:{show:250,hide:400},overlay:a},l.a.createElement(y.a,{variant:"light",size:"sm",style:{marginLeft:"1.5%"}}," \u2139\ufe0f "))),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(N.a.Control,{as:"select",name:t,value:e.state.addingData.Fields[t],onChange:function(t){e.onChangeAdd(t)}},l.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0}," Select "),e.props.data.metaData.entryTypes.map((function(t){if(e.state.goalAdding===t.Category&&!e.state.data.metaData.nonDeletableGoalFields.includes(t.Type))return l.a.createElement("option",{value:t.Type}," ",t.Type," ")})))))}if("Name"===t){for(var n=[],r=0;r<e.state.data.entryNames.length;r++){var o=e.state.data.entryNames[r];e.state.goalAdding===o.Category&&e.state.addingData.Fields.Type===o.Type&&n.push(o.Name)}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(z.a,null,l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.addingData.Fields[t],onChange:function(t){e.onChangeAdd(t)}}),l.a.createElement(J.a,{show:e.state.nameMenuShow,as:z.a.Prepend,onToggle:e.onClickRootClose.bind(e)},l.a.createElement(J.a.Toggle,{variant:"outline-secondary",eventKey:"00"}," "),l.a.createElement(J.a.Menu,{rootCloseEvent:"click"},n.map((function(t){return l.a.createElement(J.a.Item,{onSelect:e.onSelectName.bind(e,t)},t)})))))))}return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"}},t),l.a.createElement(q.a.Item,{style:{width:"50%"}},l.a.createElement(N.a.Control,{as:"input",name:t,value:e.state.addingData.Fields[t],onChange:function(t){e.onChangeAdd(t)}})))})))),l.a.createElement(P.a.Footer,null,this.state.invalidFields?l.a.createElement(R.a,{show:this.state.invalidFields,variant:"danger",onClose:this.hideAlert.bind(this),dismissible:!0},l.a.createElement("p",null," ",this.state.alertMessage," ")):l.a.createElement("div",null," "),l.a.createElement(y.a,{variant:"secondary",onClick:this.closeAddModal.bind(this)}," Close "),l.a.createElement(y.a,{variant:"primary",onClick:this.onClickSaveAdd.bind(this)}," Save "))):l.a.createElement("div",null," "),this.state.data.metaData.categories.map((function(t){var a="";return l.a.createElement("div",null,l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null,l.a.createElement(w.a,null,t," Goals",l.a.createElement(C.a,null,l.a.createElement(y.a,{variant:"primary",style:{float:"right"},onClick:e.openAddModal.bind(e,t)},"+")))),l.a.createElement(_.a.Text,null,e.state.data.goals.map((function(n,r){var o=e.constructPieData(n.Fields);if(n["Goal Type"]===t)return""!==n.lastUpdated&&(""===a?a=new Date(n.lastUpdated):new Date(a).getTime()<new Date(n.lastUpdated).getTime()&&(a=new Date(n.lastUpdated).toLocaleString())),l.a.createElement("div",null,l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},n.fieldOrder.map((function(e){return l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"50%"},variant:"primary"},e),l.a.createElement(q.a.Item,{style:{width:"50%"}},n.Fields[e]))})),l.a.createElement(w.a,{style:{marginTop:"1%"}},l.a.createElement(C.a,null,l.a.createElement(y.a,{variant:"light",style:{float:"left",margin:"1%",backgroundColor:"#E0E0E0"},onClick:e.openEditModal.bind(e,t,r)},"\u270f\ufe0f"),n.deletable?l.a.createElement(y.a,{variant:"light",style:{float:"left",margin:"1%",backgroundColor:"#E0E0E0"},onClick:e.deleteGoal.bind(e,r)}," \ud83d\uddd1\ufe0f "):l.a.createElement("div",null," ")))),l.a.createElement(C.a,{sm:6},l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null," ",t," Analysis "),l.a.createElement(_.a.Text,null,l.a.createElement(te.a,{data:o,options:{maintainAspectRatio:!1}})))))),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("hr",{style:{border:"1px solid #DCDCDC"}}))))})))),l.a.createElement(_.a.Footer,null,l.a.createElement("small",{className:"text-muted"}," Last Updated: ",a.toLocaleString()))),l.a.createElement("br",null))})))}}]),a}(n.Component),le=a(43),re=a(60),oe=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={data:null,activeTab:"calendar"},e.componentDidMount=function(){e.setState({data:e.props.data})},e.toggleTabs=function(t){e.setState({activeTab:t})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(le.a,{fluid:!0,collapseOnSelect:!0,expand:"md",bg:"light",style:{marginBottom:"1%"}},l.a.createElement(le.a.Brand,{href:"/"}," Training Diary "),l.a.createElement(le.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),l.a.createElement(le.a.Collapse,{id:"responsive-navbar-nav"},l.a.createElement(re.a,{className:"mr-auto"}),l.a.createElement(re.a,{className:"justify-content-end"},l.a.createElement(y.a,{variant:"light",href:"/profile",className:"td-header-button"}," Profile "),l.a.createElement(y.a,{variant:"light",onClick:this.props.logout,className:"td-header-button"}," Logout ")))),l.a.createElement(D.a,{fluid:!0},l.a.createElement(w.a,{style:{height:"75vh"}},l.a.createElement(C.a,null,l.a.createElement(S.a,{activeKey:this.state.activeTab,onSelect:function(t){e.toggleTabs(t)}},l.a.createElement(T.a,{eventKey:"graph",title:"Graph \ud83d\udcc9"},"graph"!==this.state.activeTab?l.a.createElement("div",null," "):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(Q,{data:this.props.data}))),l.a.createElement(T.a,{eventKey:"calendar",title:"Calendar \ud83d\udcc5"},"calendar"!==this.state.activeTab?l.a.createElement("div",null," "):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(X,{data:this.props.data,saveData:this.props.saveData,addModalShow:this.props.addModalShow,editModalShow:this.props.editModalShow,isSaving:this.props.isSaving,toggleAddModal:this.props.toggleAddModal,toggleEditModal:this.props.toggleEditModal,toggleSaveBar:this.props.toggleSaveBar,dataToEdit:this.props.dataToEdit}))),l.a.createElement(T.a,{eventKey:"dataList",title:"Data-List \ud83d\udcdd"},"dataList"!==this.state.activeTab?l.a.createElement("div",null," "):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(Z,{data:this.props.data,saveData:this.props.saveData,addModalShow:this.props.addModalShow,editModalShow:this.props.editModalShow,isSaving:this.props.isSaving,toggleAddModal:this.props.toggleAddModal,toggleEditModal:this.props.toggleEditModal,toggleSaveBar:this.props.toggleSaveBar,dataToEdit:this.props.dataToEdit}))),l.a.createElement(T.a,{eventKey:"goals",title:"Goals \ud83c\udfaf"},"goals"!==this.state.activeTab?l.a.createElement("div",null," "):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(ne,{data:this.props.data,saveData:this.props.saveData}))))))))}}]),a}(n.Component),se=a(97),ie=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={data:null,validated:!1,username:"",email:"",birthday:null,oldPassword:"",newPassword:"",confirmNewPassword:"",saving:!1,showModal:!1,showEditModal:!1,editModalData:{},addModalData:{},fields:[],categoryMenuShow:!1,showAlert:!1,alertMessage:"",entryTypeIndex:-1},e.componentDidMount=function(){e.setState({data:e.props.data,username:e.props.data._id,email:e.props.data.email,birthday:new Date(e.props.data.birthday)})},e.onChangeAccountInfo=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(b.a)({},a,n))},e.onSelectBirthday=function(t){e.setState({birthday:t})},e.handleInfoSubmit=function(){var t=Object(d.a)(i.a.mark((function t(a){var n,l,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===a.currentTarget.checkValidity()&&(a.preventDefault(),a.stopPropagation()),e.setState({validated:!0}),n={},l=e.state.username.trim(),a.preventDefault(),0!==e.state.username.trim().length&&0!==e.state.email.trim().length&&null!==e.state.birthday){t.next=8;break}return t.abrupt("return");case 8:if(e.state.username.trim()!==e.props.data._id&&(n._id=e.state.username.trim(),l=e.props.data._id),e.state.email.trim()!==e.props.data.email&&(n.email=e.state.email.trim()),new Date(e.state.birthday).getTime()!==new Date(e.props.data.birthday).getTime()&&(n.birthday=e.state.birthday),0!==Object.keys(n).length){t.next=15;break}return alert("You did not make any changes"),e.setState({validated:!1}),t.abrupt("return");case 15:return e.props.toggleSaving(),(r=JSON.parse(JSON.stringify(e.props.data)))._id=e.state.username,r.email=e.state.email,r.birthday=e.state.birthday,t.next=22,e.props.changeUsernameAndEmail(n,r,e.props.token,l);case 22:e.setState({validated:!1});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePasswordSubmit=function(){var t=Object(d.a)(i.a.mark((function t(a){var n,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===a.currentTarget.checkValidity()&&(a.preventDefault(),a.stopPropagation()),e.setState({validated:!0}),a.preventDefault(),0!==e.state.oldPassword.trim().length&&0!==e.state.newPassword.trim().length&&0!==e.state.confirmNewPassword.trim().length){t.next=6;break}return t.abrupt("return");case 6:if(e.state.newPassword===e.state.confirmNewPassword){t.next=10;break}return alert("Cannot proceed -- New password does not match confirmation password"),e.setState({validated:!1}),t.abrupt("return");case 10:if(e.state.newPassword!==e.state.oldPassword){t.next=14;break}return alert("Cannot proceed -- New password is the same as the old password"),e.setState({validated:!1}),t.abrupt("return");case 14:return e.props.toggleSaving(),n={oldPassword:e.state.oldPassword,newPassword:e.state.newPassword},l=JSON.parse(JSON.stringify(e.props.data)),t.next=19,e.props.changePassword(n,l,e.props.token);case 19:e.forceUpdate(),e.setState({validated:!1});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.resetFields=function(){e.setState({validated:!1,oldPassword:"",newPassword:"",confirmNewPassword:"",username:e.props.data._id,email:e.props.data.email,birthday:new Date(e.props.data.birthday)})},e.openEditModal=function(){var t=Object(d.a)(i.a.mark((function t(a){var n,l,r,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n={},l=[],r=e.props.data.metaData.entryTypes[a],n.Category=r.Category,n.Type=r.Type,n.Notes="string",o=0;o<r.displayOrder.length;o++)"Category"!==(s=r.displayOrder[o])&&"Type"!==s&&"Notes"!==s&&l.push({fieldName:s,dataType:r[s]});return t.next=9,e.setState({showEditModal:!0,editModalData:n,fields:l,entryTypeIndex:a});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.closeEditModal=Object(d.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({showEditModal:!1,editModalData:{},fields:[],entryTypeIndex:-1});case 2:e.hideAlert();case 3:case"end":return t.stop()}}),t)}))),e.onChangeEditModal=function(t){var a=t.target.name,n=t.target.value,l=JSON.parse(JSON.stringify(e.state.editModalData));l[a]=n,e.setState({editModalData:l})},e.openAddModal=Object(d.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={Category:"",Type:"",Notes:"string"},t.next=3,e.setState({showModal:!0,addModalData:a});case 3:case"end":return t.stop()}}),t)}))),e.closeAddModal=function(){e.setState({addModalData:{},fields:[],showModal:!1}),e.hideAlert()},e.onChangeAddModal=function(t){var a=t.target.name,n=t.target.value,l=JSON.parse(JSON.stringify(e.state.addModalData));"Category"===a&&e.showCategoryList(n),l[a]=n,e.setState({addModalData:l})},e.onSelectDropdown=function(t,a){var n=JSON.parse(JSON.stringify(e.state.addModalData));n[t]=a,e.setState({addModalData:n})},e.onClickRootCloseCategory=function(){e.state.categoryMenuShow?e.setState({categoryMenuShow:!1}):e.setState({categoryMenuShow:!0})},e.showCategoryList=function(t){0===t.length?e.setState({categoryMenuShow:!1}):e.setState({categoryMenuShow:!0})},e.addField=function(){var t=e.state.fields.slice();t.push({fieldName:"",dataType:""}),e.setState({fields:t})},e.onChangeField=function(t,a){var n=t.target.name,l=t.target.value,r=e.state.fields.slice();r[a][n]=l,e.setState({fields:r})},e.typeExists=function(t,a){for(var n=0;n<e.props.data.metaData.entryTypes.length;n++){var l=e.props.data.metaData.entryTypes[n];if(l.Category===t&&l.Type===a)return!0}return!1},e.validateFields=function(){var t=Object.keys(e.state.addModalData),a=[];if(0===Object.keys(e.state.addModalData).length)return e.showAlert("Cannot add new data, you're missing some required fields!"),!1;for(var n in e.state.addModalData)if(0===e.state.addModalData[n].toString().trim().length)return e.showAlert("Cannot add new data, you're missing some required fields!"),!1;for(var l=0;l<e.state.fields.length;l++){var r=e.state.fields[l];for(var n in a.push(r.fieldName),r)if(0===r[n].toString().trim().length)return e.showAlert("Cannot add new data, you're missing some required fields!"),!1}if(e.typeExists(e.state.addModalData.Category.trim(),e.state.addModalData.Type.trim()))return e.showAlert("Cannot add new data -- '"+e.state.addModalData.Type+"' already exists under '"+e.state.addModalData.Category+"'!"),!1;for(l=0;l<e.state.fields.length;l++){r=e.state.fields[l];for(var n in r){if(t.includes(r[n].toString().trim()))return e.showAlert("Cannot add new data -- the name '"+r[n].toString().trim()+"' already exists"),!1;for(var o=0,s=0;s<a.length;s++)r[n].toString().trim()===a[s].toString().trim()&&o++;if(o>1)return e.showAlert("Cannot add new data -- the name '"+r[n].toString().trim()+"' is a duplicate"),!1}}return!0},e.validateEditFields=function(){var t=Object.keys(e.state.editModalData),a=[],n=e.props.data.metaData.entryTypes[e.state.entryTypeIndex];if(0===Object.keys(e.state.editModalData).length)return e.showAlert("Cannot edit data, you're missing some required fields!"),!1;for(var l in e.state.editModalData)if(0===e.state.editModalData[l].toString().trim().length)return e.showAlert("Cannot edit data, you're missing some required fields!"),!1;for(var r=0;r<e.state.fields.length;r++){var o=e.state.fields[r];for(var l in a.push(o.fieldName),o)if(0===o[l].toString().trim().length)return e.showAlert("Cannot edit data, you're missing some required fields!"),!1}if(e.typeExists(e.state.editModalData.Category.trim(),e.state.editModalData.Type.trim())&&n.Type!==e.state.editModalData.Type.trim())return e.showAlert("Cannot edit data -- '"+e.state.editModalData.Type+"' already exists under '"+e.state.editModalData.Category+"'!"),!1;for(r=0;r<e.state.fields.length;r++){o=e.state.fields[r];for(var l in o){if(t.includes(o[l].toString().trim()))return e.showAlert("Cannot edit data -- the name '"+o[l]+"' already exists"),!1;for(var s=0,i=0;i<a.length;i++)o[l].toString().trim()===a[i].toString().trim()&&s++;if(s>1)return e.showAlert("Cannot edit data -- the name '"+o[l].toString().trim()+"' is a duplicate"),!1}}return!0},e.onClickSaveEdit=Object(d.a)(i.a.mark((function t(){var a,n,l,r,o,s,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validateEditFields()){t.next=18;break}for(a=JSON.parse(JSON.stringify(e.props.data)),[],(n={}).Category=e.state.editModalData.Category.toString().trim(),n.Type=e.state.editModalData.Type.toString().trim(),r=0;r<e.state.fields.length;r++)o=e.state.fields[r],s=o.fieldName.toString().trim(),d=o.dataType,n[s]=d;return n.Notes=e.state.editModalData.Notes,l=Object.keys(n),n.displayOrder=l,n.Date="string",n.calculationType="none",n.deletable=!0,a.metaData.entryTypes[e.state.entryTypeIndex]=n,t.next=16,e.props.saveData(a);case 16:e.closeEditModal(),e.forceUpdate();case 18:case"end":return t.stop()}}),t)}))),e.onClickSave=Object(d.a)(i.a.mark((function t(){var a,n,l,r,o,s,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validateFields()){t.next=21;break}for(a=JSON.parse(JSON.stringify(e.props.data)),[],(n={}).Category=e.state.addModalData.Category.toString().trim(),n.Type=e.state.addModalData.Type.toString().trim(),r=0;r<e.state.fields.length;r++)o=e.state.fields[r],s=o.fieldName.toString().trim(),d=o.dataType,n[s]=d;return n.Notes=e.state.addModalData.Notes,l=Object.keys(n),n.displayOrder=l,n.Date="string",n.calculationType="none",n.deletable=!0,a.metaData.entryTypes.push(n),a.metaData.categories.includes(n.Category)||a.metaData.categories.push(n.Category),t.next=17,e.props.saveData(a);case 17:e.closeAddModal(),e.forceUpdate(),t.next=22;break;case 21:return t.abrupt("return");case 22:case"end":return t.stop()}}),t)}))),e.deleteData=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete this entry?")){t.next=9;break}return(n=JSON.parse(JSON.stringify(e.props.data))).metaData.entryTypes.splice(a,1),t.next=6,e.props.saveData(n);case 6:e.forceUpdate(),t.next=10;break;case 9:return t.abrupt("return");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteCategory=function(){var t=Object(d.a)(i.a.mark((function t(a){var n,l,r,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("All data linked to this category will be removed -- Are you sure you want to delete it? ")){t.next=15;break}for((n=JSON.parse(JSON.stringify(e.props.data))).metaData.categories.splice(n.metaData.categories.indexOf(a),1),l=[],r=[],o=0;o<n.metaData.entryTypes.length;o++)(s=n.metaData.entryTypes[o]).Category!==a&&l.push(s);for(o=0;o<n.userData.length;o++)(s=n.userData[o]).Category!==a&&r.push(s);return n.metaData.entryTypes=l,n.userData=r,t.next=12,e.props.saveData(n);case 12:e.forceUpdate(),t.next=16;break;case 15:return t.abrupt("return");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showAlert=function(t){e.setState({showAlert:!0,alertMessage:t})},e.hideAlert=function(){e.setState({showAlert:!1,alertMessage:""})},e.removeField=function(t){var a=e.state.fields.slice();a.splice(t,1),e.setState({fields:a})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=l.a.createElement(N.a.Control,{required:!0,type:"input",value:this.state.birthday,autoComplete:"off"}),a={margin:"1%",float:"right",backgroundColor:"#D3D3D3"};return l.a.createElement("div",null,l.a.createElement(le.a,{fluid:!0,collapseOnSelect:!0,expand:"md",bg:"light",style:{marginBottom:"5%"}},l.a.createElement(le.a.Brand,{href:"/"}," Training Diary "),l.a.createElement(le.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),l.a.createElement(le.a.Collapse,{id:"responsive-navbar-nav"},l.a.createElement(re.a,{className:"mr-auto"}),l.a.createElement(re.a,{className:"justify-content-end"},l.a.createElement(y.a,{variant:"light",href:"/",style:a}," Home "),l.a.createElement(y.a,{variant:"light",onClick:this.props.logout,style:a}," Logout ")))),this.state.showModal?l.a.createElement(P.a,{show:this.state.showModal,backdrop:"static",onHide:this.closeAddModal.bind(this),size:"lg"},l.a.createElement(P.a.Header,{closeButton:!0},l.a.createElement(P.a.Title,null,"Add Custom Training Data")),l.a.createElement(P.a.Body,null,l.a.createElement("h5",null," Category & Type "),l.a.createElement("br",null),Object.keys(this.state.addModalData).map((function(t){return"Category"===t?l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Category "),l.a.createElement(z.a,null,l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.addModalData[t],onChange:function(t){e.onChangeAddModal(t)}}),l.a.createElement(J.a,{show:e.state.categoryMenuShow,as:z.a.Prepend,onToggle:e.onClickRootCloseCategory.bind(e)},l.a.createElement(J.a.Toggle,{variant:"outline-secondary",eventKey:"00"}," "),l.a.createElement(J.a.Menu,{rootCloseEvent:"click"},e.props.data.metaData.categories.map((function(a){return l.a.createElement(J.a.Item,{onSelect:e.onSelectDropdown.bind(e,t,a)},a)}))))),l.a.createElement("br",null))):"Type"===t?l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Type "),l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.addModalData[t],onChange:function(t){e.onChangeAddModal(t)}}),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("hr",{style:{border:"1px solid lightGray"}}),l.a.createElement("h5",null," Fields  ",l.a.createElement(y.a,{variant:"primary",size:"sm",style:{float:"right"},onClick:e.addField.bind(e)}," Add Field + ")," "),l.a.createElement("br",null))))):0!==e.state.fields.length?e.state.fields.map((function(t,a){return l.a.createElement("div",null,l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(y.a,{variant:"danger",size:"sm",style:{float:"right"},onClick:e.removeField.bind(e,a)}," X "))),l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Field Name "),l.a.createElement(N.a.Control,{as:"input",name:"fieldName",value:t.fieldName,onChange:function(t){e.onChangeField(t,a)}})),l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Data Type "),l.a.createElement(N.a.Control,{as:"select",name:"dataType",onChange:function(t){e.onChangeField(t,a)}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0}," Select "),l.a.createElement("option",{value:"string"}," String "),l.a.createElement("option",{value:"number"}," Number ")),l.a.createElement("br",null))))})):void 0})),l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Field Name "),l.a.createElement(N.a.Control,{as:"input",name:"Notes",value:"Notes",disabled:!0})),l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Data Type "),l.a.createElement(N.a.Control,{as:"select",disabled:!0},l.a.createElement("option",{value:"string"}," String ")),l.a.createElement("br",null)))),this.state.showAlert?l.a.createElement(P.a.Footer,null,l.a.createElement("div",null,l.a.createElement(R.a,{variant:"danger",onClose:this.hideAlert.bind(this),dismissible:!0},l.a.createElement("p",null," ",this.state.alertMessage," "))),l.a.createElement(y.a,{variant:"secondary",onClick:this.closeAddModal.bind(this)}," Close "),l.a.createElement(y.a,{variant:"primary",onClick:this.onClickSave.bind(this)}," Save ")):l.a.createElement(P.a.Footer,null,l.a.createElement(y.a,{variant:"secondary",onClick:this.closeAddModal.bind(this)}," Close "),l.a.createElement(y.a,{variant:"primary",onClick:this.onClickSave.bind(this)}," Save "))):l.a.createElement("div",null," "),this.state.showEditModal?l.a.createElement(P.a,{show:this.state.showEditModal,backdrop:"static",onHide:this.closeEditModal.bind(this),size:"lg"},l.a.createElement(P.a.Header,{closeButton:!0},l.a.createElement(P.a.Title,null,"Edit Custom Training Data")),l.a.createElement(P.a.Body,null,l.a.createElement("h5",null," Category & Type "),l.a.createElement("br",null),Object.keys(this.state.editModalData).map((function(t,a){return"Category"===t?l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Category "),l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.editModalData[t],onChange:function(t){e.onChangeEditModal(t)},disabled:!0}),l.a.createElement("br",null))):"Type"===t?l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Type "),l.a.createElement(N.a.Control,{as:"input",autoComplete:"off",name:t,value:e.state.editModalData[t],onChange:function(t){e.onChangeEditModal(t)}}),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("hr",{style:{border:"1px solid lightGray"}}),l.a.createElement("h5",null," Fields  ",l.a.createElement(y.a,{variant:"primary",size:"sm",style:{float:"right"},onClick:e.addField.bind(e)}," Add Field + ")," "),l.a.createElement("br",null))))):0!==e.state.fields.length?e.state.fields.map((function(t,a){return l.a.createElement("div",null,l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(y.a,{variant:"danger",size:"sm",style:{float:"right"},onClick:e.removeField.bind(e,a)}," X "))),l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Field Name "),l.a.createElement(N.a.Control,{as:"input",name:"fieldName",value:t.fieldName,onChange:function(t){e.onChangeField(t,a)}})),l.a.createElement(C.a,{sm:6},0===t.fieldName.length?l.a.createElement("div",null,l.a.createElement(N.a.Label,null," Data Type "),l.a.createElement(N.a.Control,{as:"select",name:"dataType",onChange:function(t){e.onChangeField(t,a)}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0}," Select "),l.a.createElement("option",{value:"string"}," String "),l.a.createElement("option",{value:"number"}," Number "))):l.a.createElement("div",null,l.a.createElement(N.a.Label,null," Data Type "),l.a.createElement(N.a.Control,{as:"select",name:"dataType",onChange:function(t){e.onChangeField(t,a)}},l.a.createElement("option",{selected:!0,hidden:!0}," ",t.dataType.charAt(0).toUpperCase()+t.dataType.slice(1)," "),l.a.createElement("option",{value:"string"}," String "),l.a.createElement("option",{value:"number"}," Number "))),l.a.createElement("br",null))))})):void 0})),l.a.createElement(w.a,null,l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Field Name "),l.a.createElement(N.a.Control,{as:"input",name:"Notes",value:"Notes",disabled:!0})),l.a.createElement(C.a,{sm:6},l.a.createElement(N.a.Label,null," Data Type "),l.a.createElement(N.a.Control,{as:"select",disabled:!0},l.a.createElement("option",{value:"string"}," String ")),l.a.createElement("br",null)))),this.state.showAlert?l.a.createElement(P.a.Footer,null,l.a.createElement("div",null,l.a.createElement(R.a,{variant:"danger",onClose:this.hideAlert.bind(this),dismissible:!0},l.a.createElement("p",null," ",this.state.alertMessage," "))),l.a.createElement(y.a,{variant:"secondary",onClick:this.closeEditModal.bind(this)}," Close "),l.a.createElement(y.a,{variant:"primary",onClick:this.onClickSaveEdit.bind(this)}," Save ")):l.a.createElement(P.a.Footer,null,l.a.createElement(y.a,{variant:"secondary",onClick:this.closeEditModal.bind(this)}," Close "),l.a.createElement(y.a,{variant:"primary",onClick:this.onClickSaveEdit.bind(this)}," Save "))):l.a.createElement("div",null," "),l.a.createElement(D.a,{style:{border:"1px solid lightGray"}},l.a.createElement(S.a,{variant:"pills",defaultActiveKey:"editProfile",onSelect:this.resetFields.bind(this)},l.a.createElement(T.a,{eventKey:"editProfile",title:"Edit Profile \u270f\ufe0f"},l.a.createElement("br",null),l.a.createElement(N.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleInfoSubmit},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Username "),l.a.createElement(N.a.Control,{required:!0,type:"input",name:"username",value:this.state.username,onChange:function(t){e.onChangeAccountInfo(t)},autoComplete:"off"}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Email "),l.a.createElement(N.a.Control,{required:!0,type:"input",name:"email",value:this.state.email,onChange:function(t){e.onChangeAccountInfo(t)},autoComplete:"off"}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Birthday "),l.a.createElement(A.a,{required:!0,selected:this.state.birthday,onChange:this.onSelectBirthday,minDate:Object(x.default)(new Date,120),maxDate:Object(F.default)(new Date,0),showYearDropdown:!0,scrollableYearDropdown:!0,showMonthDropdown:!0,dropdownMode:"select",placeholderText:"Birthday",customInput:t}))),l.a.createElement("br",null),l.a.createElement(w.a,null,this.props.saving?l.a.createElement(C.a,null,l.a.createElement(se.a,{animation:"border",variant:"primary"})):l.a.createElement("div",null," "),l.a.createElement(C.a,null,l.a.createElement(y.a,{type:"submit",style:{float:"right"}}," Save "))),l.a.createElement("br",null))),l.a.createElement(T.a,{eventKey:"changePassword",title:"Change Password \ud83d\udd11"},l.a.createElement("br",null),l.a.createElement(N.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handlePasswordSubmit},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Old Password "),l.a.createElement(N.a.Control,{required:!0,type:"password",name:"oldPassword",value:this.state.oldPassword,onChange:function(t){e.onChangeAccountInfo(t)}}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," New Password "),l.a.createElement(N.a.Control,{required:!0,type:"password",name:"newPassword",value:this.state.newPassword,onChange:function(t){e.onChangeAccountInfo(t)}}))),l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(N.a.Label,null," Confirm New Password "),l.a.createElement(N.a.Control,{required:!0,type:"password",name:"confirmNewPassword",value:this.state.confirmNewPassword,onChange:function(t){e.onChangeAccountInfo(t)}}))),l.a.createElement("br",null),l.a.createElement(w.a,null,this.props.saving?l.a.createElement(C.a,null,l.a.createElement(se.a,{animation:"border",variant:"primary"})):l.a.createElement("div",null," "),l.a.createElement(C.a,null,l.a.createElement(y.a,{type:"submit",style:{float:"right"}}," Save "))),l.a.createElement("br",null))),l.a.createElement(T.a,{eventKey:"accountStats",title:"Account Stats \ud83d\udcc8"},l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null,"Goal Statistics \ud83c\udfaf",l.a.createElement("hr",{style:{border:"1px solid lightGray"}})),l.a.createElement(_.a.Text,null,this.props.data.metaData.categories.map((function(t){var a=0;return e.props.data.goals.map((function(e){e["Goal Type"]===t&&a++})),l.a.createElement("div",null,l.a.createElement("li",null," Number of ",t," Goals: ",a," "),l.a.createElement("br",null))})))))),l.a.createElement(C.a,null,l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null,"Training Statistics \ud83d\udcaa",l.a.createElement("hr",{style:{border:"1px solid lightGray"}})),l.a.createElement(_.a.Text,null,this.props.data.metaData.categories.map((function(t){var a=0;return e.props.data.userData.map((function(e){e.Category===t&&a++})),l.a.createElement("div",null,l.a.createElement("li",null," Number of ",t," Entries: ",a," "),l.a.createElement("br",null))}))))))),l.a.createElement("br",null)),l.a.createElement(T.a,{eventKey:"customize",title:"Customize Data \u2699\ufe0f"},l.a.createElement("br",null),l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement("h3",null,"Training Data Options",l.a.createElement(y.a,{variant:"primary",style:{float:"right"},onClick:this.openAddModal.bind(this)}," + ")),l.a.createElement("p",null,"Customize your data by editing, deleting, and adding to the options below."),l.a.createElement(w.a,null,this.props.data.metaData.categories.map((function(t){return l.a.createElement(C.a,{sm:12},l.a.createElement(_.a,null,l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Title,null,"Diet"!==t&&"Body"!==t&&"Exercise"!==t?l.a.createElement(w.a,null,l.a.createElement(C.a,null,t,l.a.createElement(y.a,{size:"sm",variant:"light",style:{margin:"1%"},onClick:e.deleteCategory.bind(e,t)}," \ud83d\uddd1\ufe0f "))):l.a.createElement(w.a,null,l.a.createElement(C.a,null,t))),l.a.createElement(_.a.Text,null,l.a.createElement(w.a,null,e.props.data.metaData.entryTypes.map((function(a,n){if(a.Category===t)return a.deletable?l.a.createElement(C.a,{sm:4},l.a.createElement(_.a,{style:{height:"100%"}},l.a.createElement(w.a,null,l.a.createElement(C.a,null,l.a.createElement(_.a.Title,null,l.a.createElement(y.a,{size:"sm",variant:"light",style:{float:"right"},onClick:e.deleteData.bind(e,n)}," \ud83d\uddd1\ufe0f "),l.a.createElement(y.a,{size:"sm",variant:"light",style:{float:"right"},onClick:e.openEditModal.bind(e,n)}," \u270f\ufe0f ")))),l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Text,null,l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"100%"}}," ",l.a.createElement("strong",null," Category ")," : ",a.Category," ")),l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"100%"}}," ",l.a.createElement("strong",null," Type ")," : ",a.Type," ")),l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"100%"}},l.a.createElement("strong",null," Fields "),a.displayOrder.map((function(e){if("Category"!==e&&"Type"!==e)return l.a.createElement("li",null," ",e," ")})))))))):l.a.createElement(C.a,{sm:4,style:{marginBottom:"3%"}},l.a.createElement(_.a,{style:{height:"100%"}},l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Text,null,l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"100%"}}," ",l.a.createElement("strong",null," Category ")," : ",a.Category," ")),l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"100%"}}," ",l.a.createElement("strong",null," Type ")," : ",a.Type," ")),l.a.createElement(q.a,{horizontal:!0},l.a.createElement(q.a.Item,{style:{width:"100%"}},l.a.createElement("strong",null," Fields "),a.displayOrder.map((function(e){if("Category"!==e&&"Type"!==e)return l.a.createElement("li",null," ",e," ")}))))))))})))))))})))))))))}}]),a}(n.Component),de=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={validated:!1,passwordValidated:!1,email:"",username:"",tempPassword:"",newPassword:"",confirmPassword:"",saving:!1},e.handleEmailSubmit=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===a.currentTarget.checkValidity()&&(a.preventDefault(),a.stopPropagation()),e.setState({validated:!0}),a.preventDefault(),0!==e.state.email.toString().trim().length){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.props.toggleSaving();case 8:return n={email:e.state.email.trim()},t.next=11,e.props.getTempCredentials(n,e.state.email);case 11:e.forceUpdate(),e.setState({validated:!1});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleTempSubmit=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===a.currentTarget.checkValidity()&&(a.preventDefault(),a.stopPropagation()),e.setState({validated:!0}),a.preventDefault(),0!==e.state.username.toString().trim().length&&0!==e.state.tempPassword.length){t.next=6;break}return t.abrupt("return");case 6:return e.props.toggleSaving(),n={username:e.state.username.trim(),tempPassword:e.state.tempPassword},t.next=10,e.props.validateTempCredentials(n);case 10:e.forceUpdate(),e.setState({validated:!1});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleNewPasswordSubmit=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1===a.currentTarget.checkValidity()&&(a.preventDefault(),a.stopPropagation()),e.setState({passwordValidated:!0}),a.preventDefault(),0!==e.state.newPassword.length&&0!==e.state.confirmPassword.length){t.next=6;break}return t.abrupt("return");case 6:if(e.state.newPassword===e.state.confirmPassword){t.next=10;break}return alert("Passwords don't match"),e.setState({passwordValidated:!1}),t.abrupt("return");case 10:if(n={password:e.state.newPassword},0===e.props.username.toString().length||void 0===e.props.username||null===e.props.token||void 0===e.props.token){t.next=16;break}return e.props.toggleSaving(),t.next=15,e.props.recoverPassword(e.props.username,e.props.token,n);case 15:e.setState({validated:!1});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeField=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(b.a)({},a,n))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(le.a,{fluid:!0,collapseOnSelect:!0,expand:"md",bg:"light",style:{marginBottom:"1%"}},l.a.createElement(le.a.Brand,{href:"/"}," Training Diary "),l.a.createElement(le.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),l.a.createElement(le.a.Collapse,{id:"responsive-navbar-nav"},l.a.createElement(re.a,{className:"mr-auto"}),l.a.createElement(re.a,{className:"justify-content-end"},l.a.createElement(y.a,{variant:"light",href:"/",className:"td-header-button"}," Home ")))),l.a.createElement(D.a,null,l.a.createElement("br",null),l.a.createElement(w.a,null,this.props.recoveryDisabled?l.a.createElement(C.a,null,l.a.createElement(_.a,{style:{marginTop:"5%"}},l.a.createElement(_.a.Header,{as:"h4"}," Enter a New Password "),l.a.createElement(_.a.Body,null,l.a.createElement(_.a.Text,null,l.a.createElement(N.a,{noValidate:!0,validated:this.state.passwordValidated,onSubmit:this.handleNewPasswordSubmit},l.a.createElement(N.a.Label,null," New Password "),l.a.createElement(N.a.Control,{required:!0,type:"password",name:"newPassword",value:this.state.newPassword,onChange:function(t){e.onChangeField(t)},autoComplete:"off"}),l.a.createElement("br",null),l.a.createElement(N.a.Label,null," Confirm New Password "),l.a.createElement(N.a.Control,{required:!0,type:"password",name:"confirmPassword",value:this.state.confirmPassword,onChange:function(t){e.onChangeField(t)},autoComplete:"off"}),l.a.createElement("br",null),l.a.createElement(w.a,{style:{textAlign:"left"}},l.a.createElement(C.a,null,l.a.createElement(y.a,{type:"submit"}," Submit ")),this.props.saving?l.a.createElement(C.a,null,l.a.createElement(se.a,{animation:"border",variant:"primary"})):l.a.createElement("div",null," "))))))):l.a.createElement(C.a,null,l.a.createElement(_.a,null,l.a.createElement(_.a.Header,{as:"h4"}," Recover Credentials "),l.a.createElement(_.a.Body,null,this.props.tempSuccess?l.a.createElement(_.a.Title,null,"Email sent!"):l.a.createElement(_.a.Title,null,"Enter your email"),l.a.createElement(_.a.Text,null,l.a.createElement(w.a,null,this.props.tempSuccess?l.a.createElement(C.a,null,"Enter the ",l.a.createElement("u",null,"username")," and ",l.a.createElement("u",null,"temporary password")," sent to ",l.a.createElement("strong",null," ",this.props.email," ")):l.a.createElement(C.a,null,"We'll send your username and a temporary password.")),l.a.createElement("br",null),l.a.createElement(w.a,null,this.props.tempSuccess?l.a.createElement(C.a,null,l.a.createElement(N.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleTempSubmit},l.a.createElement(N.a.Label,null," Username "),l.a.createElement(N.a.Control,{required:!0,type:"input",name:"username",value:this.state.username,onChange:function(t){e.onChangeField(t)},autoComplete:"off",disabled:this.props.recoveryDisabled}),l.a.createElement("br",null),l.a.createElement(N.a.Label,null," Temporary Password (expires in 5 min.) "),l.a.createElement(N.a.Control,{required:!0,type:"password",name:"tempPassword",value:this.state.tempPassword,onChange:function(t){e.onChangeField(t)},autoComplete:"off",disabled:this.props.recoveryDisabled}),l.a.createElement("br",null),l.a.createElement(w.a,{style:{textAlign:"left"}},l.a.createElement(C.a,null,l.a.createElement(y.a,{type:"submit",disabled:this.props.recoveryDisabled}," Submit ")),this.props.saving?l.a.createElement(C.a,null,l.a.createElement(se.a,{animation:"border",variant:"primary"})):l.a.createElement("div",null," ")))):l.a.createElement(C.a,null,l.a.createElement(N.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleEmailSubmit},l.a.createElement(N.a.Label,null," Email "),l.a.createElement(N.a.Control,{required:!0,type:"input",name:"email",value:this.state.email,onChange:function(t){e.onChangeField(t)},autoComplete:"off"}),l.a.createElement("br",null),l.a.createElement(w.a,{style:{textAlign:"left"}},l.a.createElement(C.a,null,l.a.createElement(y.a,{type:"submit",disabled:this.props.recoveryDisabled}," Submit ")),this.props.saving?l.a.createElement(C.a,null,l.a.createElement(se.a,{animation:"border",variant:"primary"})):l.a.createElement("div",null," "))))))))))))}}]),a}(n.Component),ce=a(35),ue=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={data:null,username:"",token:null,waitingForPage:!1,isLoggedIn:!1,onLogin:!0,onRegistration:!1,addModalShow:!1,editModalShow:!1,isSaving:!1,dataToEdit:null,authLoading:!1,disabled:!1,tempSuccess:!1,recoveryEmail:"",recoveryDisabled:!1,profileAndCredSaving:!1},e.componentDidMount=function(){e.setState({waitingForPage:!0});var t=localStorage.getItem("token"),a=localStorage.getItem("username");E.a.post("/verifyLogin/".concat(a),{},{headers:{token:t}}).catch((function(e){})).then((function(t){return e.handleVerificationResponse(t,a)}))},e.toggleSaveBar=function(){e.setState({isSaving:!e.state.isSaving})},e.toggleAddModal=function(){e.setState({addModalShow:!e.state.addModalShow})},e.toggleEditModal=function(t){e.setState({editModalShow:!e.state.editModalShow,dataToEdit:t})},e.toggleProfAndCredLoader=function(){e.setState({profileAndCredSaving:!e.state.profileAndCredSaving})},e.handleGetResponse=function(t,a){try{200===Number(t.status)&&(e.toggleAuthLoader(),e.setState({token:t.headers.token,username:a,data:t.data,isLoggedIn:!0,waitingForPage:!1}),localStorage.setItem("username",a),localStorage.setItem("token",t.headers.token))}catch(n){}},e.handleVerificationResponse=function(t,a){var n=Object(m.a)(e);try{if(null===localStorage.getItem("token")||null===localStorage.getItem("username"))e.setState({isLoggedIn:!1,waitingForPage:!1}),localStorage.clear();else{var l=Number(t.status);200===l?(localStorage.setItem("username",a),localStorage.setItem("token",t.headers.token),E.a.get("/getAllData/".concat(a),{headers:{token:t.headers.token}}).catch((function(e){alert("Internal Error -- could not get data -- redirecting to login page"),n.logout()})).then((function(t){return e.handleGetResponse(t,a)}))):204===l&&(alert("Session expired. Logging you out"),e.logout())}}catch(r){return void e.logout()}},e.saveData=function(t){var a=e.state.data._id;E.a.post("/postData/".concat(a),t,{headers:{token:e.state.token}}).catch((function(e){alert("Internal Error -- could not save data -- redirecting to login page")})).then((function(a){return e.handlePostResponse(a,t)}))},e.handlePostResponse=function(t,a){try{200===Number(t.status)&&(localStorage.setItem("token",t.headers.token),e.setState({token:t.headers.token}),e.setState({data:a}))}catch(n){e.logout()}},e.changeUsernameAndEmail=function(t,a,n,l){var r=Object(m.a)(e);E.a.post("/postAccountInfo/".concat(l),t,{headers:{token:n}}).catch((function(e){if(409!==e.response.status)return 401===e.response.status?(alert("Session expired. Logging you out "),void r.logout()):void alert("Internal Error -- could not update username & email");alert("Username or email already exists. Please choose another one")})).then((function(t){return e.handleChangeInfoResponse(t,a)}))},e.handleChangeInfoResponse=function(t,a){try{200===Number(t.status)&&(alert("Changed successfully"),e.toggleProfAndCredLoader(),localStorage.setItem("token",t.headers.token),localStorage.setItem("username",a._id),e.setState({token:t.headers.token}),e.setState({data:a}))}catch(n){return void e.toggleProfAndCredLoader()}},e.changePassword=function(t,a,n){var l=Object(m.a)(e),r=a._id;E.a.post("/postCredentials/".concat(r),t,{headers:{token:n}}).catch((function(e){if(409!==e.response.status)return 401===e.response.status?(alert("Session expired. Logging you out"),void l.logout()):void alert("Internal Error -- could not change password");alert("Old password is invalid")})).then((function(t){return e.handleChangePasswordResponse(t,a)}))},e.handleChangePasswordResponse=function(t,a){try{200===Number(t.status)&&(alert("Changed successfully"),e.toggleProfAndCredLoader(),localStorage.setItem("token",t.headers.token),e.setState({token:t.headers.token}),e.setState({data:a}))}catch(n){return void e.toggleProfAndCredLoader()}},e.getTempCredentials=function(t,a){Object(m.a)(e);E.a.post("/getTempPassword",t).catch((function(e){401!==e.response.status?alert("Internal error -- could not get temporary credentials"):alert("The email you gave is not linked to any user")})).then((function(t){return e.handleTempResponse(t,a)}))},e.handleTempResponse=function(t,a){try{200===Number(t.status)&&(e.toggleProfAndCredLoader(),e.setState({tempSuccess:!0,recoveryEmail:a}))}catch(n){return void e.toggleProfAndCredLoader()}},e.validateTempCredentials=function(t){Object(m.a)(e);E.a.post("/postTempPassword",t).catch((function(e){401!==e.response.status?alert("Internal error -- could not process temporary credentials"):alert("The username or temporary password you entered is invalid or expired")})).then((function(a){return e.handleValidateTempResponse(a,t.username)}))},e.handleValidateTempResponse=function(t,a){try{200===Number(t.status)&&(e.toggleProfAndCredLoader(),e.setState({recoveryDisabled:!0,token:t.headers.token,username:a}))}catch(n){return void e.toggleProfAndCredLoader()}},e.recoverPassword=function(t,a,n){Object(m.a)(e);E.a.post("/postRecoveryPassword/".concat(t),n,{headers:{token:a}}).catch((function(e){401!==e.response.status?alert("Internal error -- could not change your password"):alert("Sorry -- You are unauthorized to perform this action")})).then((function(t){return e.handleRecoveryResponse(t)}))},e.handleRecoveryResponse=function(t){try{200===Number(t.status)&&(alert("Password changed successfully. Redirecting to login page"),e.toggleProfAndCredLoader(),e.setState({onLogin:!0}),window.location.pathname="/")}catch(a){return void e.toggleProfAndCredLoader()}},e.grantAccess=function(t,a){var n=Object(m.a)(e);E.a.get("/getAllData/".concat(t),{headers:{token:a}}).catch((function(e){500===e.response.status?(alert("Internal Error -- could not get data -- redirecting to login page"),n.logout()):401===e.response.status&&(alert("Session expired, logging you out"),n.logout())})).then((function(a){return e.handleGetResponse(a,t)}))},e.toLogin=function(){e.setState({onLogin:!0})},e.logout=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.clear();case 2:window.location.pathname="/";case 3:case"end":return e.stop()}}),e)}))),e.toggleAuthLoader=function(){e.setState({authLoading:!e.state.authLoading,disabled:!e.state.disabled})},e}return Object(u.a)(a,[{key:"render",value:function(){return this.state.waitingForPage?l.a.createElement("div",{style:{textAlign:"center",marginTop:"5%"}},l.a.createElement(v.a,{type:"TailSpin",color:"#00BFFF",height:80,width:80})):this.state.isLoggedIn?l.a.createElement(I.a,null,l.a.createElement(ce.c,null,l.a.createElement(ce.a,{exact:!0,path:"/"},l.a.createElement(oe,{data:this.state.data,logout:this.logout,saveData:this.saveData,addModalShow:this.state.addModalShow,editModalShow:this.state.editModalShow,isSaving:this.state.isSaving,toggleAddModal:this.toggleAddModal,toggleEditModal:this.toggleEditModal,toggleSaveBar:this.toggleSaveBar,dataToEdit:this.state.dataToEdit})),l.a.createElement(ce.a,{exact:!0,path:"/profile"},l.a.createElement("div",null,l.a.createElement(ie,{data:this.state.data,token:this.state.token,changeUsernameAndEmail:this.changeUsernameAndEmail,changePassword:this.changePassword,saving:this.state.profileAndCredSaving,toggleSaving:this.toggleProfAndCredLoader,saveData:this.saveData,logout:this.logout}))),l.a.createElement(ce.a,null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h1",null," This page does not exist :( "),l.a.createElement("br",null),l.a.createElement(y.a,{href:"/"}," Back to main page \ud83d\udcaa "))))):this.state.onLogin?l.a.createElement(I.a,null,l.a.createElement(ce.c,null,l.a.createElement(ce.a,{exact:!0,path:"/"},l.a.createElement("div",null,l.a.createElement(L,{grantAccess:this.grantAccess,authLoading:this.state.authLoading,disabled:this.state.disabled,toggleAuthLoader:this.toggleAuthLoader}))),l.a.createElement(ce.a,{exact:!0,path:"/reset"},l.a.createElement(de,{getTempCredentials:this.getTempCredentials,validateTempCredentials:this.validateTempCredentials,tempSuccess:this.state.tempSuccess,email:this.state.recoveryEmail,recoveryDisabled:this.state.recoveryDisabled,token:this.state.token,username:this.state.username,recoverPassword:this.recoverPassword,saving:this.state.profileAndCredSaving,toggleSaving:this.toggleProfAndCredLoader})),l.a.createElement(ce.a,null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h1",null," This page does not exist :( "),l.a.createElement("br",null),l.a.createElement(y.a,{href:"/"}," Back to main page \ud83d\udcaa "))))):l.a.createElement("div",null," hi ")}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[362,1,2]]]);
//# sourceMappingURL=main.2232546c.chunk.js.map